var as=Object.defineProperty,os=Object.defineProperties;var ls=Object.getOwnPropertyDescriptors;var rt=Object.getOwnPropertySymbols;var on=Object.prototype.hasOwnProperty,ln=Object.prototype.propertyIsEnumerable;var an=(e,t,n)=>t in e?as(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,C=(e,t)=>{for(var n in t||(t={}))on.call(t,n)&&an(e,n,t[n]);if(rt)for(var n of rt(t))ln.call(t,n)&&an(e,n,t[n]);return e},X=(e,t)=>os(e,ls(t));var cn=(e,t)=>{var n={};for(var r in e)on.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&rt)for(var r of rt(e))t.indexOf(r)<0&&ln.call(e,r)&&(n[r]=e[r]);return n};import{_ as cs}from"../chunks/preload-helper-466a825b.js";import{S as fr,i as Er,s as mr,L as j,e as ee,c as te,a as re,d as W,b as q,g as Se,G as Y,n as un,v as us,M as ds,D as dn,N as fn,O as pr,t as me,h as pe,k as ge,m as he,j as En,x as fs,K as Es,y as ms,z as ps,r as Ts,p as _s,C as Is,P as gs,w as hs}from"../chunks/index-35534cbb.js";/*!
 * FilePond 4.30.3
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Rs=e=>e instanceof HTMLElement,Ds=(e,t=[],n=[])=>{const r=C({},e),s=[],a=[],i=()=>C({},r),l=()=>{const d=[...s];return s.length=0,d},o=()=>{const d=[...a];a.length=0,d.forEach(({type:T,data:D})=>{u(T,D)})},u=(d,T,D)=>{if(D&&!document.hidden){a.push({type:d,data:T});return}E[d]&&E[d](T),s.push({type:d,data:T})},c=(d,...T)=>m[d]?m[d](...T):null,f={getState:i,processActionQueue:l,processDispatchQueue:o,dispatch:u,query:c};let m={};t.forEach(d=>{m=C(C({},d(r)),m)});let E={};return n.forEach(d=>{E=C(C({},d(u,c,r)),E)}),f},Os=(e,t,n)=>{if(typeof n=="function"){e[t]=n;return}Object.defineProperty(e,t,C({},n))},z=(e,t)=>{for(const n in e)!e.hasOwnProperty(n)||t(n,e[n])},Me=e=>{const t={};return z(e,n=>{Os(t,n,e[n])}),t},K=(e,t,n=null)=>{if(n===null)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,n)},Ss="http://www.w3.org/2000/svg",ys=["svg","path"],mn=e=>ys.includes(e),pt=(e,t,n={})=>{typeof t=="object"&&(n=t,t=null);const r=mn(e)?document.createElementNS(Ss,e):document.createElement(e);return t&&(mn(e)?K(r,"class",t):r.className=t),z(n,(s,a)=>{K(r,s,a)}),r},vs=e=>(t,n)=>{typeof n!="undefined"&&e.children[n]?e.insertBefore(t,e.children[n]):e.appendChild(t)},As=(e,t)=>(n,r)=>(typeof r!="undefined"?t.splice(r,0,n):t.push(n),n),Ps=(e,t)=>n=>(t.splice(t.indexOf(n),1),n.element.parentNode&&e.removeChild(n.element),n),Ms=(()=>typeof window!="undefined"&&typeof window.document!="undefined")(),Tr=()=>Ms,bs=Tr()?pt("svg"):{},Ls="children"in bs?e=>e.children.length:e=>e.childNodes.length,_r=(e,t,n,r)=>{const s=n[0]||e.left,a=n[1]||e.top,i=s+e.width,l=a+e.height*(r[1]||1),o={element:C({},e),inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:s,top:a,right:i,bottom:l}};return t.filter(u=>!u.isRectIgnored()).map(u=>u.rect).forEach(u=>{pn(o.inner,C({},u.inner)),pn(o.outer,C({},u.outer))}),Tn(o.inner),o.outer.bottom+=o.element.marginBottom,o.outer.right+=o.element.marginRight,Tn(o.outer),o},pn=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},Tn=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},be=e=>typeof e=="number",Cs=(e,t,n,r=.001)=>Math.abs(e-t)<r&&Math.abs(n)<r,Ns=({stiffness:e=.5,damping:t=.75,mass:n=10}={})=>{let r=null,s=null,a=0,i=!1;const u=Me({interpolate:(c,f)=>{if(i)return;if(!(be(r)&&be(s))){i=!0,a=0;return}a+=-(s-r)*e/n,s+=a,a*=t,Cs(s,r,a)||f?(s=r,a=0,i=!0,u.onupdate(s),u.oncomplete(s)):u.onupdate(s)},target:{set:c=>{if(be(c)&&!be(s)&&(s=c),r===null&&(r=c,s=c),r=c,s===r||typeof r=="undefined"){i=!0,a=0,u.onupdate(s),u.oncomplete(s);return}i=!1},get:()=>r},resting:{get:()=>i},onupdate:c=>{},oncomplete:c=>{}});return u},ws=e=>e<.5?2*e*e:-1+(4-2*e)*e,Fs=({duration:e=500,easing:t=ws,delay:n=0}={})=>{let r=null,s,a,i=!0,l=!1,o=null;const c=Me({interpolate:(f,m)=>{i||o===null||(r===null&&(r=f),!(f-r<n)&&(s=f-r-n,s>=e||m?(s=1,a=l?0:1,c.onupdate(a*o),c.oncomplete(a*o),i=!0):(a=s/e,c.onupdate((s>=0?t(l?1-a:a):0)*o))))},target:{get:()=>l?0:o,set:f=>{if(o===null){o=f,c.onupdate(f),c.oncomplete(f);return}f<o?(o=1,l=!0):(l=!1,o=f),i=!1,r=null}},resting:{get:()=>i},onupdate:f=>{},oncomplete:f=>{}});return c},_n={spring:Ns,tween:Fs},Gs=(e,t,n)=>{const r=e[t]&&typeof e[t][n]=="object"?e[t][n]:e[t]||e,s=typeof r=="string"?r:r.type,a=typeof r=="object"?C({},r):{};return _n[s]?_n[s](a):null},kt=(e,t,n,r=!1)=>{t=Array.isArray(t)?t:[t],t.forEach(s=>{e.forEach(a=>{let i=a,l=()=>n[a],o=u=>n[a]=u;typeof a=="object"&&(i=a.key,l=a.getter||l,o=a.setter||o),!(s[i]&&!r)&&(s[i]={get:l,set:o})})})},Us=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r})=>{const s=C({},t),a=[];return z(e,(i,l)=>{const o=Gs(l);if(!o)return;o.onupdate=c=>{t[i]=c},o.target=s[i],kt([{key:i,setter:c=>{o.target!==c&&(o.target=c)},getter:()=>t[i]}],[n,r],t,!0),a.push(o)}),{write:i=>{let l=document.hidden,o=!0;return a.forEach(u=>{u.resting||(o=!1),u.interpolate(i,l)}),o},destroy:()=>{}}},Bs=e=>(t,n)=>{e.addEventListener(t,n)},Vs=e=>(t,n)=>{e.removeEventListener(t,n)},xs=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,viewState:s,view:a})=>{const i=[],l=Bs(a.element),o=Vs(a.element);return r.on=(u,c)=>{i.push({type:u,fn:c}),l(u,c)},r.off=(u,c)=>{i.splice(i.findIndex(f=>f.type===u&&f.fn===c),1),o(u,c)},{write:()=>!0,destroy:()=>{i.forEach(u=>{o(u.type,u.fn)})}}},qs=({mixinConfig:e,viewProps:t,viewExternalAPI:n})=>{kt(e,n,t)},ie=e=>e!=null,Ys={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},Hs=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,view:s})=>{const a=C({},t),i={};kt(e,[n,r],t);const l=()=>[t.translateX||0,t.translateY||0],o=()=>[t.scaleX||0,t.scaleY||0],u=()=>s.rect?_r(s.rect,s.childViews,l(),o()):null;return n.rect={get:u},r.rect={get:u},e.forEach(c=>{t[c]=typeof a[c]=="undefined"?Ys[c]:a[c]}),{write:()=>{if(!!Ws(i,t))return zs(s.element,t),Object.assign(i,C({},t)),!0},destroy:()=>{}}},Ws=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const n in t)if(t[n]!==e[n])return!0;return!1},zs=(e,{opacity:t,perspective:n,translateX:r,translateY:s,scaleX:a,scaleY:i,rotateX:l,rotateY:o,rotateZ:u,originX:c,originY:f,width:m,height:E})=>{let d="",T="";(ie(c)||ie(f))&&(T+=`transform-origin: ${c||0}px ${f||0}px;`),ie(n)&&(d+=`perspective(${n}px) `),(ie(r)||ie(s))&&(d+=`translate3d(${r||0}px, ${s||0}px, 0) `),(ie(a)||ie(i))&&(d+=`scale3d(${ie(a)?a:1}, ${ie(i)?i:1}, 1) `),ie(u)&&(d+=`rotateZ(${u}rad) `),ie(l)&&(d+=`rotateX(${l}rad) `),ie(o)&&(d+=`rotateY(${o}rad) `),d.length&&(T+=`transform:${d};`),ie(t)&&(T+=`opacity:${t};`,t===0&&(T+="visibility:hidden;"),t<1&&(T+="pointer-events:none;")),ie(E)&&(T+=`height:${E}px;`),ie(m)&&(T+=`width:${m}px;`);const D=e.elementCurrentStyle||"";(T.length!==D.length||T!==D)&&(e.style.cssText=T,e.elementCurrentStyle=T)},ks={styles:Hs,listeners:xs,animations:Us,apis:qs},In=(e={},t={},n={})=>(t.layoutCalculated||(e.paddingTop=parseInt(n.paddingTop,10)||0,e.marginTop=parseInt(n.marginTop,10)||0,e.marginRight=parseInt(n.marginRight,10)||0,e.marginBottom=parseInt(n.marginBottom,10)||0,e.marginLeft=parseInt(n.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=t.offsetParent===null,e),Z=({tag:e="div",name:t=null,attributes:n={},read:r=()=>{},write:s=()=>{},create:a=()=>{},destroy:i=()=>{},filterFrameActionsForChild:l=(E,d)=>d,didCreateView:o=()=>{},didWriteView:u=()=>{},ignoreRect:c=!1,ignoreRectUpdate:f=!1,mixins:m=[]}={})=>(E,d={})=>{const T=pt(e,`filepond--${t}`,n),D=window.getComputedStyle(T,null),g=In();let O=null,v=!1;const S=[],R=[],M={},U={},y=[s],P=[r],F=[i],b=()=>T,w=()=>S.concat(),x=()=>M,_=V=>(k,ue)=>k(V,ue),N=()=>O||(O=_r(g,S,[0,0],[1,1]),O),p=()=>D,h=()=>{O=null,S.forEach(ue=>ue._read()),!(f&&g.width&&g.height)&&In(g,T,D);const k={root:Ie,props:d,rect:g};P.forEach(ue=>ue(k))},L=(V,k,ue)=>{let qe=k.length===0;return y.forEach(le=>{le({props:d,root:Ie,actions:k,timestamp:V,shouldOptimize:ue})===!1&&(qe=!1)}),R.forEach(le=>{le.write(V)===!1&&(qe=!1)}),S.filter(le=>!!le.element.parentNode).forEach(le=>{le._write(V,l(le,k),ue)||(qe=!1)}),S.forEach((le,nt)=>{le.element.parentNode||(Ie.appendChild(le.element,nt),le._read(),le._write(V,l(le,k),ue),qe=!1)}),v=qe,u({props:d,root:Ie,actions:k,timestamp:V}),qe},A=()=>{R.forEach(V=>V.destroy()),F.forEach(V=>{V({root:Ie,props:d})}),S.forEach(V=>V._destroy())},B={element:{get:b},style:{get:p},childViews:{get:w}},H=X(C({},B),{rect:{get:N},ref:{get:x},is:V=>t===V,appendChild:vs(T),createChildView:_(E),linkView:V=>(S.push(V),V),unlinkView:V=>{S.splice(S.indexOf(V),1)},appendChildView:As(T,S),removeChildView:Ps(T,S),registerWriter:V=>y.push(V),registerReader:V=>P.push(V),registerDestroyer:V=>F.push(V),invalidateLayout:()=>T.layoutCalculated=!1,dispatch:E.dispatch,query:E.query}),Be={element:{get:b},childViews:{get:w},rect:{get:N},resting:{get:()=>v},isRectIgnored:()=>c,_read:h,_write:L,_destroy:A},Ve=X(C({},B),{rect:{get:()=>g}});Object.keys(m).sort((V,k)=>V==="styles"?1:k==="styles"?-1:0).forEach(V=>{const k=ks[V]({mixinConfig:m[V],viewProps:d,viewState:U,viewInternalAPI:H,viewExternalAPI:Be,view:Me(Ve)});k&&R.push(k)});const Ie=Me(H);a({root:Ie,props:d});const xe=Ls(T);return S.forEach((V,k)=>{Ie.appendChild(V.element,xe+k)}),o(Ie),Me(Be)},Xs=(e,t,n=60)=>{const r="__framePainter";if(window[r]){window[r].readers.push(e),window[r].writers.push(t);return}window[r]={readers:[e],writers:[t]};const s=window[r],a=1e3/n;let i=null,l=null,o=null,u=null;const c=()=>{document.hidden?(o=()=>window.setTimeout(()=>f(performance.now()),a),u=()=>window.clearTimeout(l)):(o=()=>window.requestAnimationFrame(f),u=()=>window.cancelAnimationFrame(l))};document.addEventListener("visibilitychange",()=>{u&&u(),c(),f(performance.now())});const f=m=>{l=o(f),i||(i=m);const E=m-i;E<=a||(i=m-E%a,s.readers.forEach(d=>d()),s.writers.forEach(d=>d(m)))};return c(),f(performance.now()),{pause:()=>{u(l)}}},oe=(e,t)=>({root:n,props:r,actions:s=[],timestamp:a,shouldOptimize:i})=>{s.filter(l=>e[l.type]).forEach(l=>e[l.type]({root:n,props:r,action:l.data,timestamp:a,shouldOptimize:i})),t&&t({root:n,props:r,actions:s,timestamp:a,shouldOptimize:i})},gn=(e,t)=>t.parentNode.insertBefore(e,t),hn=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),ht=e=>Array.isArray(e),ye=e=>e==null,js=e=>e.trim(),Rt=e=>""+e,Qs=(e,t=",")=>ye(e)?[]:ht(e)?e:Rt(e).split(t).map(js).filter(n=>n.length),Ir=e=>typeof e=="boolean",gr=e=>Ir(e)?e:e==="true",ae=e=>typeof e=="string",hr=e=>be(e)?e:ae(e)?Rt(e).replace(/[a-z]+/gi,""):0,ft=e=>parseInt(hr(e),10),Rn=e=>parseFloat(hr(e)),Xe=e=>be(e)&&isFinite(e)&&Math.floor(e)===e,Dn=(e,t=1e3)=>{if(Xe(e))return e;let n=Rt(e).trim();return/MB$/i.test(n)?(n=n.replace(/MB$i/,"").trim(),ft(n)*t*t):/KB/i.test(n)?(n=n.replace(/KB$i/,"").trim(),ft(n)*t):ft(n)},Le=e=>typeof e=="function",$s=e=>{let t=self,n=e.split("."),r=null;for(;r=n.shift();)if(t=t[r],!t)return null;return t},On={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},Ks=e=>{const t={};return t.url=ae(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},z(On,n=>{t[n]=Zs(n,e[n],On[n],t.timeout,t.headers)}),t.process=e.process||ae(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t},Zs=(e,t,n,r,s)=>{if(t===null)return null;if(typeof t=="function")return t;const a={url:n==="GET"||n==="PATCH"?`?${e}=`:"",method:n,headers:s,withCredentials:!1,timeout:r,onload:null,ondata:null,onerror:null};if(ae(t))return a.url=t,a;if(Object.assign(a,t),ae(a.headers)){const i=a.headers.split(/:(.+)/);a.headers={header:i[0],value:i[1]}}return a.withCredentials=gr(a.withCredentials),a},Js=e=>Ks(e),ei=e=>e===null,ne=e=>typeof e=="object"&&e!==null,ti=e=>ne(e)&&ae(e.url)&&ne(e.process)&&ne(e.revert)&&ne(e.restore)&&ne(e.fetch),Ut=e=>ht(e)?"array":ei(e)?"null":Xe(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":ti(e)?"api":typeof e,ni=e=>e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),ri={array:Qs,boolean:gr,int:e=>Ut(e)==="bytes"?Dn(e):ft(e),number:Rn,float:Rn,bytes:Dn,string:e=>Le(e)?e:Rt(e),function:e=>$s(e),serverapi:Js,object:e=>{try{return JSON.parse(ni(e))}catch{return null}}},si=(e,t)=>ri[t](e),Rr=(e,t,n)=>{if(e===t)return e;let r=Ut(e);if(r!==n){const s=si(e,n);if(r=Ut(s),s===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${n}"`;e=s}return e},ii=(e,t)=>{let n=e;return{enumerable:!0,get:()=>n,set:r=>{n=Rr(r,e,t)}}},ai=e=>{const t={};return z(e,n=>{const r=e[n];t[n]=ii(r[0],r[1])}),Me(t)},oi=e=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:ai(e)}),Dt=(e,t="-")=>e.split(/(?=[A-Z])/).map(n=>n.toLowerCase()).join(t),li=(e,t)=>{const n={};return z(t,r=>{n[r]={get:()=>e.getState().options[r],set:s=>{e.dispatch(`SET_${Dt(r,"_").toUpperCase()}`,{value:s})}}}),n},ci=e=>(t,n,r)=>{const s={};return z(e,a=>{const i=Dt(a,"_").toUpperCase();s[`SET_${i}`]=l=>{try{r.options[a]=l.value}catch{}t(`DID_SET_${i}`,{value:r.options[a]})}}),s},ui=e=>t=>{const n={};return z(e,r=>{n[`GET_${Dt(r,"_").toUpperCase()}`]=s=>t.options[r]}),n},Te={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},Xt=()=>Math.random().toString(36).substr(2,9),jt=(e,t)=>e.splice(t,1),di=(e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)},Ot=()=>{const e=[],t=(r,s)=>{jt(e,e.findIndex(a=>a.event===r&&(a.cb===s||!s)))},n=(r,s,a)=>{e.filter(i=>i.event===r).map(i=>i.cb).forEach(i=>di(()=>i(...s),a))};return{fireSync:(r,...s)=>{n(r,s,!0)},fire:(r,...s)=>{n(r,s,!1)},on:(r,s)=>{e.push({event:r,cb:s})},onOnce:(r,s)=>{e.push({event:r,cb:(...a)=>{t(r,s),s(...a)}})},off:t}},Dr=(e,t,n)=>{Object.getOwnPropertyNames(e).filter(r=>!n.includes(r)).forEach(r=>Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r)))},fi=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],ce=e=>{const t={};return Dr(e,t,fi),t},Ei=e=>{e.forEach((t,n)=>{t.released&&jt(e,n)})},G={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},J={INPUT:1,LIMBO:2,LOCAL:3},Or=e=>/[^0-9]+/.exec(e),Sr=()=>Or(1.1 .toLocaleString())[0],mi=()=>{const e=Sr(),t=1e3 .toLocaleString(),n=1e3 .toString();return t!==n?Or(t)[0]:e==="."?",":"."},I={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},Qt=[],Re=(e,t,n)=>new Promise((r,s)=>{const a=Qt.filter(l=>l.key===e).map(l=>l.cb);if(a.length===0){r(t);return}const i=a.shift();a.reduce((l,o)=>l.then(u=>o(u,n)),i(t,n)).then(l=>r(l)).catch(l=>s(l))}),Ge=(e,t,n)=>Qt.filter(r=>r.key===e).map(r=>r.cb(t,n)),pi=(e,t)=>Qt.push({key:e,cb:t}),Ti=e=>Object.assign(Ye,e),Tt=()=>C({},Ye),_i=e=>{z(e,(t,n)=>{!Ye[t]||(Ye[t][0]=Rr(n,Ye[t][0],Ye[t][1]))})},Ye={id:[null,I.STRING],name:["filepond",I.STRING],disabled:[!1,I.BOOLEAN],className:[null,I.STRING],required:[!1,I.BOOLEAN],captureMethod:[null,I.STRING],allowSyncAcceptAttribute:[!0,I.BOOLEAN],allowDrop:[!0,I.BOOLEAN],allowBrowse:[!0,I.BOOLEAN],allowPaste:[!0,I.BOOLEAN],allowMultiple:[!1,I.BOOLEAN],allowReplace:[!0,I.BOOLEAN],allowRevert:[!0,I.BOOLEAN],allowRemove:[!0,I.BOOLEAN],allowProcess:[!0,I.BOOLEAN],allowReorder:[!1,I.BOOLEAN],allowDirectoriesOnly:[!1,I.BOOLEAN],storeAsFile:[!1,I.BOOLEAN],forceRevert:[!1,I.BOOLEAN],maxFiles:[null,I.INT],checkValidity:[!1,I.BOOLEAN],itemInsertLocationFreedom:[!0,I.BOOLEAN],itemInsertLocation:["before",I.STRING],itemInsertInterval:[75,I.INT],dropOnPage:[!1,I.BOOLEAN],dropOnElement:[!0,I.BOOLEAN],dropValidation:[!1,I.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],I.ARRAY],instantUpload:[!0,I.BOOLEAN],maxParallelUploads:[2,I.INT],allowMinimumUploadDuration:[!0,I.BOOLEAN],chunkUploads:[!1,I.BOOLEAN],chunkForce:[!1,I.BOOLEAN],chunkSize:[5e6,I.INT],chunkRetryDelays:[[500,1e3,3e3],I.ARRAY],server:[null,I.SERVER_API],fileSizeBase:[1e3,I.INT],labelFileSizeBytes:["bytes",I.STRING],labelFileSizeKilobytes:["KB",I.STRING],labelFileSizeMegabytes:["MB",I.STRING],labelFileSizeGigabytes:["GB",I.STRING],labelDecimalSeparator:[Sr(),I.STRING],labelThousandsSeparator:[mi(),I.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',I.STRING],labelInvalidField:["Field contains invalid files",I.STRING],labelFileWaitingForSize:["Waiting for size",I.STRING],labelFileSizeNotAvailable:["Size not available",I.STRING],labelFileCountSingular:["file in list",I.STRING],labelFileCountPlural:["files in list",I.STRING],labelFileLoading:["Loading",I.STRING],labelFileAdded:["Added",I.STRING],labelFileLoadError:["Error during load",I.STRING],labelFileRemoved:["Removed",I.STRING],labelFileRemoveError:["Error during remove",I.STRING],labelFileProcessing:["Uploading",I.STRING],labelFileProcessingComplete:["Upload complete",I.STRING],labelFileProcessingAborted:["Upload cancelled",I.STRING],labelFileProcessingError:["Error during upload",I.STRING],labelFileProcessingRevertError:["Error during revert",I.STRING],labelTapToCancel:["tap to cancel",I.STRING],labelTapToRetry:["tap to retry",I.STRING],labelTapToUndo:["tap to undo",I.STRING],labelButtonRemoveItem:["Remove",I.STRING],labelButtonAbortItemLoad:["Abort",I.STRING],labelButtonRetryItemLoad:["Retry",I.STRING],labelButtonAbortItemProcessing:["Cancel",I.STRING],labelButtonUndoItemProcessing:["Undo",I.STRING],labelButtonRetryItemProcessing:["Retry",I.STRING],labelButtonProcessItem:["Upload",I.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',I.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',I.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',I.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',I.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',I.STRING],oninit:[null,I.FUNCTION],onwarning:[null,I.FUNCTION],onerror:[null,I.FUNCTION],onactivatefile:[null,I.FUNCTION],oninitfile:[null,I.FUNCTION],onaddfilestart:[null,I.FUNCTION],onaddfileprogress:[null,I.FUNCTION],onaddfile:[null,I.FUNCTION],onprocessfilestart:[null,I.FUNCTION],onprocessfileprogress:[null,I.FUNCTION],onprocessfileabort:[null,I.FUNCTION],onprocessfilerevert:[null,I.FUNCTION],onprocessfile:[null,I.FUNCTION],onprocessfiles:[null,I.FUNCTION],onremovefile:[null,I.FUNCTION],onpreparefile:[null,I.FUNCTION],onupdatefiles:[null,I.FUNCTION],onreorderfiles:[null,I.FUNCTION],beforeDropFile:[null,I.FUNCTION],beforeAddFile:[null,I.FUNCTION],beforeRemoveFile:[null,I.FUNCTION],beforePrepareFile:[null,I.FUNCTION],stylePanelLayout:[null,I.STRING],stylePanelAspectRatio:[null,I.STRING],styleItemPanelAspectRatio:[null,I.STRING],styleButtonRemoveItemPosition:["left",I.STRING],styleButtonProcessItemPosition:["right",I.STRING],styleLoadIndicatorPosition:["right",I.STRING],styleProgressIndicatorPosition:["right",I.STRING],styleButtonRemoveItemAlign:[!1,I.BOOLEAN],files:[[],I.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],I.ARRAY]},Ce=(e,t)=>ye(t)?e[0]||null:Xe(t)?e[t]||null:(typeof t=="object"&&(t=t.id),e.find(n=>n.id===t)||null),yr=e=>{if(ye(e))return e;if(/:/.test(e)){const t=e.split(":");return t[1]/t[0]}return parseFloat(e)},De=e=>e.filter(t=>!t.archived),Ii={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let st=null;const gi=()=>{if(st===null)try{const e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));const t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,st=t.files.length===1}catch{st=!1}return st},hi=[G.LOAD_ERROR,G.PROCESSING_ERROR,G.PROCESSING_REVERT_ERROR],Ri=[G.LOADING,G.PROCESSING,G.PROCESSING_QUEUED,G.INIT],Di=[G.PROCESSING_COMPLETE],Oi=e=>hi.includes(e.status),Si=e=>Ri.includes(e.status),yi=e=>Di.includes(e.status),Sn=e=>ne(e.options.server)&&(ne(e.options.server.process)||Le(e.options.server.process)),vi=e=>({GET_STATUS:()=>{const t=De(e.items),{EMPTY:n,ERROR:r,BUSY:s,IDLE:a,READY:i}=Ii;return t.length===0?n:t.some(Oi)?r:t.some(Si)?s:t.some(yi)?i:a},GET_ITEM:t=>Ce(e.items,t),GET_ACTIVE_ITEM:t=>Ce(De(e.items),t),GET_ACTIVE_ITEMS:()=>De(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{const n=Ce(e.items,t);return n?n.filename:null},GET_ITEM_SIZE:t=>{const n=Ce(e.items,t);return n?n.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter(t=>/^style/.test(t)).map(t=>({name:t,value:e.options[t]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:yr(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>De(e.items).filter(n=>n.status===t),GET_TOTAL_ITEMS:()=>De(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&gi()&&!Sn(e),IS_ASYNC:()=>Sn(e),GET_FILE_SIZE_LABELS:t=>({labelBytes:t("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:t("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:t("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:t("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),Ai=e=>{const t=De(e.items).length;if(!e.options.allowMultiple)return t===0;const n=e.options.maxFiles;return n===null||t<n},vr=(e,t,n)=>Math.max(Math.min(n,e),t),Pi=(e,t,n)=>e.splice(t,0,n),Mi=(e,t,n)=>ye(t)?null:typeof n=="undefined"?(e.push(t),t):(n=vr(n,0,e.length),Pi(e,n,t),t),Bt=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),tt=e=>e.split("/").pop().split("?").shift(),St=e=>e.split(".").pop(),bi=e=>{if(typeof e!="string")return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?t==="jpeg"?"jpg":t:""},je=(e,t="")=>(t+e).slice(-t.length),Ar=(e=new Date)=>`${e.getFullYear()}-${je(e.getMonth()+1,"00")}-${je(e.getDate(),"00")}_${je(e.getHours(),"00")}-${je(e.getMinutes(),"00")}-${je(e.getSeconds(),"00")}`,ze=(e,t,n=null,r=null)=>{const s=typeof n=="string"?e.slice(0,e.size,n):e.slice(0,e.size,e.type);return s.lastModifiedDate=new Date,e._relativePath&&(s._relativePath=e._relativePath),ae(t)||(t=Ar()),t&&r===null&&St(t)?s.name=t:(r=r||bi(s.type),s.name=t+(r?"."+r:"")),s},Li=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,Pr=(e,t)=>{const n=Li();if(n){const r=new n;return r.append(e),r.getBlob(t)}return new Blob([e],{type:t})},Ci=(e,t)=>{const n=new ArrayBuffer(e.length),r=new Uint8Array(n);for(let s=0;s<e.length;s++)r[s]=e.charCodeAt(s);return Pr(n,t)},Mr=e=>(/^data:(.+);/.exec(e)||[])[1]||null,Ni=e=>e.split(",")[1].replace(/\s/g,""),wi=e=>atob(Ni(e)),Fi=e=>{const t=Mr(e),n=wi(e);return Ci(n,t)},Gi=(e,t,n)=>ze(Fi(e),t,null,n),Ui=e=>{if(!/^content-disposition:/i.test(e))return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return t.length?decodeURI(t[t.length-1]):null},Bi=e=>{if(/content-length:/i.test(e)){const t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},Vi=e=>/x-content-transfer-id:/i.test(e)&&(e.split(":")[1]||"").trim()||null,$t=e=>{const t={source:null,name:null,size:null},n=e.split(`
`);for(let r of n){const s=Ui(r);if(s){t.name=s;continue}const a=Bi(r);if(a){t.size=a;continue}const i=Vi(r);if(i){t.source=i;continue}}return t},xi=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=()=>t.progress,r=()=>{t.request&&t.request.abort&&t.request.abort()},s=()=>{const l=t.source;i.fire("init",l),l instanceof File?i.fire("load",l):l instanceof Blob?i.fire("load",ze(l,l.name)):Bt(l)?i.fire("load",Gi(l)):a(l)},a=l=>{if(!e){i.fire("error",{type:"error",body:"Can't load URL",code:400});return}t.timestamp=Date.now(),t.request=e(l,o=>{t.duration=Date.now()-t.timestamp,t.complete=!0,o instanceof Blob&&(o=ze(o,o.name||tt(l))),i.fire("load",o instanceof Blob?o:o?o.body:null)},o=>{i.fire("error",typeof o=="string"?{type:"error",code:0,body:o}:o)},(o,u,c)=>{if(c&&(t.size=c),t.duration=Date.now()-t.timestamp,!o){t.progress=null;return}t.progress=u/c,i.fire("progress",t.progress)},()=>{i.fire("abort")},o=>{const u=$t(typeof o=="string"?o:o.headers);i.fire("meta",{size:t.size||u.size,filename:u.name,source:u.source})})},i=X(C({},Ot()),{setSource:l=>t.source=l,getProgress:n,abort:r,load:s});return i},yn=e=>/GET|HEAD/.test(e),Ne=(e,t,n)=>{const r={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{s=!0,i.abort()}};let s=!1,a=!1;n=C({method:"POST",headers:{},withCredentials:!1},n),t=encodeURI(t),yn(n.method)&&e&&(t=`${t}${encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))}`);const i=new XMLHttpRequest,l=yn(n.method)?i:i.upload;return l.onprogress=o=>{s||r.onprogress(o.lengthComputable,o.loaded,o.total)},i.onreadystatechange=()=>{i.readyState<2||i.readyState===4&&i.status===0||a||(a=!0,r.onheaders(i))},i.onload=()=>{i.status>=200&&i.status<300?r.onload(i):r.onerror(i)},i.onerror=()=>r.onerror(i),i.onabort=()=>{s=!0,r.onabort()},i.ontimeout=()=>r.ontimeout(i),i.open(n.method,t,!0),Xe(n.timeout)&&(i.timeout=n.timeout),Object.keys(n.headers).forEach(o=>{const u=unescape(encodeURIComponent(n.headers[o]));i.setRequestHeader(o,u)}),n.responseType&&(i.responseType=n.responseType),n.withCredentials&&(i.withCredentials=!0),i.send(e),r},$=(e,t,n,r)=>({type:e,code:t,body:n,headers:r}),we=e=>t=>{e($("error",0,"Timeout",t.getAllResponseHeaders()))},vn=e=>/\?/.test(e),et=(...e)=>{let t="";return e.forEach(n=>{t+=vn(t)&&vn(n)?n.replace(/\?/,"&"):n}),t},At=(e="",t)=>{if(typeof t=="function")return t;if(!t||!ae(t.url))return null;const n=t.onload||(s=>s),r=t.onerror||(s=>null);return(s,a,i,l,o,u)=>{const c=Ne(s,et(e,t.url),X(C({},t),{responseType:"blob"}));return c.onload=f=>{const m=f.getAllResponseHeaders(),E=$t(m).name||tt(s);a($("load",f.status,t.method==="HEAD"?null:ze(n(f.response),E),m))},c.onerror=f=>{i($("error",f.status,r(f.response)||f.statusText,f.getAllResponseHeaders()))},c.onheaders=f=>{u($("headers",f.status,null,f.getAllResponseHeaders()))},c.ontimeout=we(i),c.onprogress=l,c.onabort=o,c}},fe={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},qi=(e,t,n,r,s,a,i,l,o,u,c)=>{const f=[],{chunkTransferId:m,chunkServer:E,chunkSize:d,chunkRetryDelays:T}=c,D={serverId:m,aborted:!1},g=t.ondata||(_=>_),O=t.onload||((_,N)=>N==="HEAD"?_.getResponseHeader("Upload-Offset"):_.response),v=t.onerror||(_=>null),S=_=>{const N=new FormData;ne(s)&&N.append(n,JSON.stringify(s));const p=typeof t.headers=="function"?t.headers(r,s):X(C({},t.headers),{"Upload-Length":r.size}),h=X(C({},t),{headers:p}),L=Ne(g(N),et(e,t.url),h);L.onload=A=>_(O(A,h.method)),L.onerror=A=>i($("error",A.status,v(A.response)||A.statusText,A.getAllResponseHeaders())),L.ontimeout=we(i)},R=_=>{const N=et(e,E.url,D.serverId),h={headers:typeof t.headers=="function"?t.headers(D.serverId):C({},t.headers),method:"HEAD"},L=Ne(null,N,h);L.onload=A=>_(O(A,h.method)),L.onerror=A=>i($("error",A.status,v(A.response)||A.statusText,A.getAllResponseHeaders())),L.ontimeout=we(i)},M=Math.floor(r.size/d);for(let _=0;_<=M;_++){const N=_*d,p=r.slice(N,N+d,"application/offset+octet-stream");f[_]={index:_,size:p.size,offset:N,data:p,file:r,progress:0,retries:[...T],status:fe.QUEUED,error:null,request:null,timeout:null}}const U=()=>a(D.serverId),y=_=>_.status===fe.QUEUED||_.status===fe.ERROR,P=_=>{if(D.aborted)return;if(_=_||f.find(y),!_){f.every(B=>B.status===fe.COMPLETE)&&U();return}_.status=fe.PROCESSING,_.progress=null;const N=E.ondata||(B=>B),p=E.onerror||(B=>null),h=et(e,E.url,D.serverId),L=typeof E.headers=="function"?E.headers(_):X(C({},E.headers),{"Content-Type":"application/offset+octet-stream","Upload-Offset":_.offset,"Upload-Length":r.size,"Upload-Name":r.name}),A=_.request=Ne(N(_.data),h,X(C({},E),{headers:L}));A.onload=()=>{_.status=fe.COMPLETE,_.request=null,w()},A.onprogress=(B,H,Be)=>{_.progress=B?H:null,b()},A.onerror=B=>{_.status=fe.ERROR,_.request=null,_.error=p(B.response)||B.statusText,F(_)||i($("error",B.status,p(B.response)||B.statusText,B.getAllResponseHeaders()))},A.ontimeout=B=>{_.status=fe.ERROR,_.request=null,F(_)||we(i)(B)},A.onabort=()=>{_.status=fe.QUEUED,_.request=null,o()}},F=_=>_.retries.length===0?!1:(_.status=fe.WAITING,clearTimeout(_.timeout),_.timeout=setTimeout(()=>{P(_)},_.retries.shift()),!0),b=()=>{const _=f.reduce((p,h)=>p===null||h.progress===null?null:p+h.progress,0);if(_===null)return l(!1,0,0);const N=f.reduce((p,h)=>p+h.size,0);l(!0,_,N)},w=()=>{f.filter(N=>N.status===fe.PROCESSING).length>=1||P()},x=()=>{f.forEach(_=>{clearTimeout(_.timeout),_.request&&_.request.abort()})};return D.serverId?R(_=>{D.aborted||(f.filter(N=>N.offset<_).forEach(N=>{N.status=fe.COMPLETE,N.progress=N.size}),w())}):S(_=>{D.aborted||(u(_),D.serverId=_,w())}),{abort:()=>{D.aborted=!0,x()}}},Yi=(e,t,n,r)=>(s,a,i,l,o,u,c)=>{if(!s)return;const f=r.chunkUploads,m=f&&s.size>r.chunkSize,E=f&&(m||r.chunkForce);if(s instanceof Blob&&E)return qi(e,t,n,s,a,i,l,o,u,c,r);const d=t.ondata||(R=>R),T=t.onload||(R=>R),D=t.onerror||(R=>null),g=typeof t.headers=="function"?t.headers(s,a)||{}:C({},t.headers),O=X(C({},t),{headers:g});var v=new FormData;ne(a)&&v.append(n,JSON.stringify(a)),(s instanceof Blob?[{name:null,file:s}]:s).forEach(R=>{v.append(n,R.file,R.name===null?R.file.name:`${R.name}${R.file.name}`)});const S=Ne(d(v),et(e,t.url),O);return S.onload=R=>{i($("load",R.status,T(R.response),R.getAllResponseHeaders()))},S.onerror=R=>{l($("error",R.status,D(R.response)||R.statusText,R.getAllResponseHeaders()))},S.ontimeout=we(l),S.onprogress=o,S.onabort=u,S},Hi=(e="",t,n,r)=>typeof t=="function"?(...s)=>t(n,...s,r):!t||!ae(t.url)?null:Yi(e,t,n,r),Qe=(e="",t)=>{if(typeof t=="function")return t;if(!t||!ae(t.url))return(s,a)=>a();const n=t.onload||(s=>s),r=t.onerror||(s=>null);return(s,a,i)=>{const l=Ne(s,e+t.url,t);return l.onload=o=>{a($("load",o.status,n(o.response),o.getAllResponseHeaders()))},l.onerror=o=>{i($("error",o.status,r(o.response)||o.statusText,o.getAllResponseHeaders()))},l.ontimeout=we(i),l}},br=(e=0,t=1)=>e+Math.random()*(t-e),Wi=(e,t=1e3,n=0,r=25,s=250)=>{let a=null;const i=Date.now(),l=()=>{let o=Date.now()-i,u=br(r,s);o+u>t&&(u=o+u-t);let c=o/t;if(c>=1||document.hidden){e(1);return}e(c),a=setTimeout(l,u)};return t>0&&l(),{clear:()=>{clearTimeout(a)}}},zi=(e,t)=>{const n={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:r}=t,s=(c,f)=>{const m=()=>{n.duration===0||n.progress===null||u.fire("progress",u.getProgress())},E=()=>{n.complete=!0,u.fire("load-perceived",n.response.body)};u.fire("start"),n.timestamp=Date.now(),n.perceivedPerformanceUpdater=Wi(d=>{n.perceivedProgress=d,n.perceivedDuration=Date.now()-n.timestamp,m(),n.response&&n.perceivedProgress===1&&!n.complete&&E()},r?br(750,1500):0),n.request=e(c,f,d=>{n.response=ne(d)?d:{type:"load",code:200,body:`${d}`,headers:{}},n.duration=Date.now()-n.timestamp,n.progress=1,u.fire("load",n.response.body),(!r||r&&n.perceivedProgress===1)&&E()},d=>{n.perceivedPerformanceUpdater.clear(),u.fire("error",ne(d)?d:{type:"error",code:0,body:`${d}`})},(d,T,D)=>{n.duration=Date.now()-n.timestamp,n.progress=d?T/D:null,m()},()=>{n.perceivedPerformanceUpdater.clear(),u.fire("abort",n.response?n.response.body:null)},d=>{u.fire("transfer",d)})},a=()=>{!n.request||(n.perceivedPerformanceUpdater.clear(),n.request.abort&&n.request.abort(),n.complete=!0)},i=()=>{a(),n.complete=!1,n.perceivedProgress=0,n.progress=0,n.timestamp=null,n.perceivedDuration=0,n.duration=0,n.request=null,n.response=null},l=r?()=>n.progress?Math.min(n.progress,n.perceivedProgress):null:()=>n.progress||null,o=r?()=>Math.min(n.duration,n.perceivedDuration):()=>n.duration,u=X(C({},Ot()),{process:s,abort:a,getProgress:l,getDuration:o,reset:i});return u},Lr=e=>e.substr(0,e.lastIndexOf("."))||e,ki=e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||Bt(e)?t[0]=e.name||Ar():Bt(e)?(t[1]=e.length,t[2]=Mr(e)):ae(e)&&(t[0]=tt(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}},ke=e=>!!(e instanceof File||e instanceof Blob&&e.name),Cr=e=>{if(!ne(e))return e;const t=ht(e)?[]:{};for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n];t[n]=r&&ne(r)?Cr(r):r}return t},Xi=(e=null,t=null,n=null)=>{const r=Xt(),s={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:t,transferId:null,processingAborted:!1,status:t?G.PROCESSING_COMPLETE:G.INIT,activeLoader:null,activeProcessor:null};let a=null;const i={},l=y=>s.status=y,o=(y,...P)=>{s.released||s.frozen||M.fire(y,...P)},u=()=>St(s.file.name),c=()=>s.file.type,f=()=>s.file.size,m=()=>s.file,E=(y,P,F)=>{if(s.source=y,M.fireSync("init"),s.file){M.fireSync("load-skip");return}s.file=ki(y),P.on("init",()=>{o("load-init")}),P.on("meta",b=>{s.file.size=b.size,s.file.filename=b.filename,b.source&&(e=J.LIMBO,s.serverFileReference=b.source,s.status=G.PROCESSING_COMPLETE),o("load-meta")}),P.on("progress",b=>{l(G.LOADING),o("load-progress",b)}),P.on("error",b=>{l(G.LOAD_ERROR),o("load-request-error",b)}),P.on("abort",()=>{l(G.INIT),o("load-abort")}),P.on("load",b=>{s.activeLoader=null;const w=_=>{s.file=ke(_)?_:s.file,e===J.LIMBO&&s.serverFileReference?l(G.PROCESSING_COMPLETE):l(G.IDLE),o("load")},x=_=>{s.file=b,o("load-meta"),l(G.LOAD_ERROR),o("load-file-error",_)};if(s.serverFileReference){w(b);return}F(b,w,x)}),P.setSource(y),s.activeLoader=P,P.load()},d=()=>{!s.activeLoader||s.activeLoader.load()},T=()=>{if(s.activeLoader){s.activeLoader.abort();return}l(G.INIT),o("load-abort")},D=(y,P)=>{if(s.processingAborted){s.processingAborted=!1;return}if(l(G.PROCESSING),a=null,!(s.file instanceof Blob)){M.on("load",()=>{D(y,P)});return}y.on("load",w=>{s.transferId=null,s.serverFileReference=w}),y.on("transfer",w=>{s.transferId=w}),y.on("load-perceived",w=>{s.activeProcessor=null,s.transferId=null,s.serverFileReference=w,l(G.PROCESSING_COMPLETE),o("process-complete",w)}),y.on("start",()=>{o("process-start")}),y.on("error",w=>{s.activeProcessor=null,l(G.PROCESSING_ERROR),o("process-error",w)}),y.on("abort",w=>{s.activeProcessor=null,s.serverFileReference=w,l(G.IDLE),o("process-abort"),a&&a()}),y.on("progress",w=>{o("process-progress",w)});const F=w=>{s.archived||y.process(w,C({},i))},b=console.error;P(s.file,F,b),s.activeProcessor=y},g=()=>{s.processingAborted=!1,l(G.PROCESSING_QUEUED)},O=()=>new Promise(y=>{if(!s.activeProcessor){s.processingAborted=!0,l(G.IDLE),o("process-abort"),y();return}a=()=>{y()},s.activeProcessor.abort()}),v=(y,P)=>new Promise((F,b)=>{const w=s.serverFileReference!==null?s.serverFileReference:s.transferId;if(w===null){F();return}y(w,()=>{s.serverFileReference=null,s.transferId=null,F()},x=>{if(!P){F();return}l(G.PROCESSING_REVERT_ERROR),o("process-revert-error"),b(x)}),l(G.IDLE),o("process-revert")}),S=(y,P,F)=>{const b=y.split("."),w=b[0],x=b.pop();let _=i;b.forEach(N=>_=_[N]),JSON.stringify(_[x])!==JSON.stringify(P)&&(_[x]=P,o("metadata-update",{key:w,value:i[w],silent:F}))},M=X(C({id:{get:()=>r},origin:{get:()=>e,set:y=>e=y},serverId:{get:()=>s.serverFileReference},transferId:{get:()=>s.transferId},status:{get:()=>s.status},filename:{get:()=>s.file.name},filenameWithoutExtension:{get:()=>Lr(s.file.name)},fileExtension:{get:u},fileType:{get:c},fileSize:{get:f},file:{get:m},relativePath:{get:()=>s.file._relativePath},source:{get:()=>s.source},getMetadata:y=>Cr(y?i[y]:i),setMetadata:(y,P,F)=>{if(ne(y)){const b=y;return Object.keys(b).forEach(w=>{S(w,b[w],P)}),y}return S(y,P,F),P},extend:(y,P)=>U[y]=P,abortLoad:T,retryLoad:d,requestProcessing:g,abortProcessing:O,load:E,process:D,revert:v},Ot()),{freeze:()=>s.frozen=!0,release:()=>s.released=!0,released:{get:()=>s.released},archive:()=>s.archived=!0,archived:{get:()=>s.archived}}),U=Me(M);return U},ji=(e,t)=>ye(t)?0:ae(t)?e.findIndex(n=>n.id===t):-1,An=(e,t)=>{const n=ji(e,t);if(!(n<0))return e[n]||null},Pn=(e,t,n,r,s,a)=>{const i=Ne(null,e,{method:"GET",responseType:"blob"});return i.onload=l=>{const o=l.getAllResponseHeaders(),u=$t(o).name||tt(e);t($("load",l.status,ze(l.response,u),o))},i.onerror=l=>{n($("error",l.status,l.statusText,l.getAllResponseHeaders()))},i.onheaders=l=>{a($("headers",l.status,null,l.getAllResponseHeaders()))},i.ontimeout=we(n),i.onprogress=r,i.onabort=s,i},Mn=e=>(e.indexOf("//")===0&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),Qi=e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&Mn(location.href)!==Mn(e),it=e=>(...t)=>Le(e)?e(...t):e,$i=e=>!ke(e.file),Pt=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(()=>{e("DID_UPDATE_ITEMS",{items:De(t.items)})},0)},bn=(e,...t)=>new Promise(n=>{if(!e)return n(!0);const r=e(...t);if(r==null)return n(!0);if(typeof r=="boolean")return n(r);typeof r.then=="function"&&r.then(n)}),Mt=(e,t)=>{e.items.sort((n,r)=>t(ce(n),ce(r)))},Ee=(e,t)=>(i={})=>{var l=i,{query:n,success:r=()=>{},failure:s=()=>{}}=l,a=cn(l,["query","success","failure"]);const o=Ce(e.items,n);if(!o){s({error:$("error",0,"Item not found"),file:null});return}t(o,r,s,a||{})},Ki=(e,t,n)=>({ABORT_ALL:()=>{De(n.items).forEach(r=>{r.freeze(),r.abortLoad(),r.abortProcessing()})},DID_SET_FILES:({value:r=[]})=>{const s=r.map(i=>({source:i.source?i.source:i,options:i.options}));let a=De(n.items);a.forEach(i=>{s.find(l=>l.source===i.source||l.source===i.file)||e("REMOVE_ITEM",{query:i,remove:!1})}),a=De(n.items),s.forEach((i,l)=>{a.find(o=>o.source===i.source||o.file===i.source)||e("ADD_ITEM",X(C({},i),{interactionMethod:Te.NONE,index:l}))})},DID_UPDATE_ITEM_METADATA:({id:r,action:s,change:a})=>{a.silent||(clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout(()=>{const i=An(n.items,r);if(!t("IS_ASYNC")){Re("SHOULD_PREPARE_OUTPUT",!1,{item:i,query:t,action:s,change:a}).then(c=>{const f=t("GET_BEFORE_PREPARE_FILE");f&&(c=f(i,c)),c&&e("REQUEST_PREPARE_OUTPUT",{query:r,item:i,success:m=>{e("DID_PREPARE_OUTPUT",{id:r,file:m})}},!0)});return}i.origin===J.LOCAL&&e("DID_LOAD_ITEM",{id:i.id,error:null,serverFileReference:i.source});const l=()=>{setTimeout(()=>{e("REQUEST_ITEM_PROCESSING",{query:r})},32)},o=c=>{i.revert(Qe(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(c?l:()=>{}).catch(()=>{})},u=c=>{i.abortProcessing().then(c?l:()=>{})};if(i.status===G.PROCESSING_COMPLETE)return o(n.options.instantUpload);if(i.status===G.PROCESSING)return u(n.options.instantUpload);n.options.instantUpload&&l()},0))},MOVE_ITEM:({query:r,index:s})=>{const a=Ce(n.items,r);if(!a)return;const i=n.items.indexOf(a);s=vr(s,0,n.items.length-1),i!==s&&n.items.splice(s,0,n.items.splice(i,1)[0])},SORT:({compare:r})=>{Mt(n,r),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:r,index:s,interactionMethod:a,success:i=()=>{},failure:l=()=>{}})=>{let o=s;if(s===-1||typeof s=="undefined"){const E=t("GET_ITEM_INSERT_LOCATION"),d=t("GET_TOTAL_ITEMS");o=E==="before"?0:d}const u=t("GET_IGNORED_FILES"),c=E=>ke(E)?!u.includes(E.name.toLowerCase()):!ye(E),m=r.filter(c).map(E=>new Promise((d,T)=>{e("ADD_ITEM",{interactionMethod:a,source:E.source||E,success:d,failure:T,index:o++,options:E.options||{}})}));Promise.all(m).then(i).catch(l)},ADD_ITEM:({source:r,index:s=-1,interactionMethod:a,success:i=()=>{},failure:l=()=>{},options:o={}})=>{if(ye(r)){l({error:$("error",0,"No source"),file:null});return}if(ke(r)&&n.options.ignoredFiles.includes(r.name.toLowerCase()))return;if(!Ai(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){const O=$("warning",0,"Max files");e("DID_THROW_MAX_FILES",{source:r,error:O}),l({error:O,file:null});return}const g=De(n.items)[0];if(g.status===G.PROCESSING_COMPLETE||g.status===G.PROCESSING_REVERT_ERROR){const O=t("GET_FORCE_REVERT");if(g.revert(Qe(n.options.server.url,n.options.server.revert),O).then(()=>{!O||e("ADD_ITEM",{source:r,index:s,interactionMethod:a,success:i,failure:l,options:o})}).catch(()=>{}),O)return}e("REMOVE_ITEM",{query:g.id})}const u=o.type==="local"?J.LOCAL:o.type==="limbo"?J.LIMBO:J.INPUT,c=Xi(u,u===J.INPUT?null:r,o.file);Object.keys(o.metadata||{}).forEach(g=>{c.setMetadata(g,o.metadata[g])}),Ge("DID_CREATE_ITEM",c,{query:t,dispatch:e});const f=t("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(s=f==="before"?-1:n.items.length),Mi(n.items,c,s),Le(f)&&r&&Mt(n,f);const m=c.id;c.on("init",()=>{e("DID_INIT_ITEM",{id:m})}),c.on("load-init",()=>{e("DID_START_ITEM_LOAD",{id:m})}),c.on("load-meta",()=>{e("DID_UPDATE_ITEM_META",{id:m})}),c.on("load-progress",g=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:m,progress:g})}),c.on("load-request-error",g=>{const O=it(n.options.labelFileLoadError)(g);if(g.code>=400&&g.code<500){e("DID_THROW_ITEM_INVALID",{id:m,error:g,status:{main:O,sub:`${g.code} (${g.body})`}}),l({error:g,file:ce(c)});return}e("DID_THROW_ITEM_LOAD_ERROR",{id:m,error:g,status:{main:O,sub:n.options.labelTapToRetry}})}),c.on("load-file-error",g=>{e("DID_THROW_ITEM_INVALID",{id:m,error:g.status,status:g.status}),l({error:g.status,file:ce(c)})}),c.on("load-abort",()=>{e("REMOVE_ITEM",{query:m})}),c.on("load-skip",()=>{e("COMPLETE_LOAD_ITEM",{query:m,item:c,data:{source:r,success:i}})}),c.on("load",()=>{const g=O=>{if(!O){e("REMOVE_ITEM",{query:m});return}c.on("metadata-update",v=>{e("DID_UPDATE_ITEM_METADATA",{id:m,change:v})}),Re("SHOULD_PREPARE_OUTPUT",!1,{item:c,query:t}).then(v=>{const S=t("GET_BEFORE_PREPARE_FILE");S&&(v=S(c,v));const R=()=>{e("COMPLETE_LOAD_ITEM",{query:m,item:c,data:{source:r,success:i}}),Pt(e,n)};if(v){e("REQUEST_PREPARE_OUTPUT",{query:m,item:c,success:M=>{e("DID_PREPARE_OUTPUT",{id:m,file:M}),R()}},!0);return}R()})};Re("DID_LOAD_ITEM",c,{query:t,dispatch:e}).then(()=>{bn(t("GET_BEFORE_ADD_FILE"),ce(c)).then(g)}).catch(O=>{if(!O||!O.error||!O.status)return g(!1);e("DID_THROW_ITEM_INVALID",{id:m,error:O.error,status:O.status})})}),c.on("process-start",()=>{e("DID_START_ITEM_PROCESSING",{id:m})}),c.on("process-progress",g=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:m,progress:g})}),c.on("process-error",g=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:m,error:g,status:{main:it(n.options.labelFileProcessingError)(g),sub:n.options.labelTapToRetry}})}),c.on("process-revert-error",g=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:m,error:g,status:{main:it(n.options.labelFileProcessingRevertError)(g),sub:n.options.labelTapToRetry}})}),c.on("process-complete",g=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:m,error:null,serverFileReference:g}),e("DID_DEFINE_VALUE",{id:m,value:g})}),c.on("process-abort",()=>{e("DID_ABORT_ITEM_PROCESSING",{id:m})}),c.on("process-revert",()=>{e("DID_REVERT_ITEM_PROCESSING",{id:m}),e("DID_DEFINE_VALUE",{id:m,value:null})}),e("DID_ADD_ITEM",{id:m,index:s,interactionMethod:a}),Pt(e,n);const{url:E,load:d,restore:T,fetch:D}=n.options.server||{};c.load(r,xi(u===J.INPUT?ae(r)&&Qi(r)&&D?At(E,D):Pn:u===J.LIMBO?At(E,T):At(E,d)),(g,O,v)=>{Re("LOAD_FILE",g,{query:t}).then(O).catch(v)})},REQUEST_PREPARE_OUTPUT:({item:r,success:s,failure:a=()=>{}})=>{const i={error:$("error",0,"Item not found"),file:null};if(r.archived)return a(i);Re("PREPARE_OUTPUT",r.file,{query:t,item:r}).then(l=>{Re("COMPLETE_PREPARE_OUTPUT",l,{query:t,item:r}).then(o=>{if(r.archived)return a(i);s(o)})})},COMPLETE_LOAD_ITEM:({item:r,data:s})=>{const{success:a,source:i}=s,l=t("GET_ITEM_INSERT_LOCATION");if(Le(l)&&i&&Mt(n,l),e("DID_LOAD_ITEM",{id:r.id,error:null,serverFileReference:r.origin===J.INPUT?null:i}),a(ce(r)),r.origin===J.LOCAL){e("DID_LOAD_LOCAL_ITEM",{id:r.id});return}if(r.origin===J.LIMBO){e("DID_COMPLETE_ITEM_PROCESSING",{id:r.id,error:null,serverFileReference:i}),e("DID_DEFINE_VALUE",{id:r.id,value:r.serverId||i});return}t("IS_ASYNC")&&n.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:r.id})},RETRY_ITEM_LOAD:Ee(n,r=>{r.retryLoad()}),REQUEST_ITEM_PREPARE:Ee(n,(r,s,a)=>{e("REQUEST_PREPARE_OUTPUT",{query:r.id,item:r,success:i=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:i}),s({file:r,output:i})},failure:a},!0)}),REQUEST_ITEM_PROCESSING:Ee(n,(r,s,a)=>{if(!(r.status===G.IDLE||r.status===G.PROCESSING_ERROR)){const l=()=>e("REQUEST_ITEM_PROCESSING",{query:r,success:s,failure:a}),o=()=>document.hidden?l():setTimeout(l,32);r.status===G.PROCESSING_COMPLETE||r.status===G.PROCESSING_REVERT_ERROR?r.revert(Qe(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(o).catch(()=>{}):r.status===G.PROCESSING&&r.abortProcessing().then(o);return}r.status!==G.PROCESSING_QUEUED&&(r.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:r.id}),e("PROCESS_ITEM",{query:r,success:s,failure:a},!0))}),PROCESS_ITEM:Ee(n,(r,s,a)=>{const i=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",G.PROCESSING).length===i){n.processingQueue.push({id:r.id,success:s,failure:a});return}if(r.status===G.PROCESSING)return;const o=()=>{const c=n.processingQueue.shift();if(!c)return;const{id:f,success:m,failure:E}=c,d=Ce(n.items,f);if(!d||d.archived){o();return}e("PROCESS_ITEM",{query:f,success:m,failure:E},!0)};r.onOnce("process-complete",()=>{s(ce(r)),o();const c=n.options.server;if(n.options.instantUpload&&r.origin===J.LOCAL&&Le(c.remove)){const E=()=>{};r.origin=J.LIMBO,n.options.server.remove(r.source,E,E)}t("GET_ITEMS_BY_STATUS",G.PROCESSING_COMPLETE).length===n.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),r.onOnce("process-error",c=>{a({error:c,file:ce(r)}),o()});const u=n.options;r.process(zi(Hi(u.server.url,u.server.process,u.name,{chunkTransferId:r.transferId,chunkServer:u.server.patch,chunkUploads:u.chunkUploads,chunkForce:u.chunkForce,chunkSize:u.chunkSize,chunkRetryDelays:u.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(c,f,m)=>{Re("PREPARE_OUTPUT",c,{query:t,item:r}).then(E=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:E}),f(E)}).catch(m)})}),RETRY_ITEM_PROCESSING:Ee(n,r=>{e("REQUEST_ITEM_PROCESSING",{query:r})}),REQUEST_REMOVE_ITEM:Ee(n,r=>{bn(t("GET_BEFORE_REMOVE_FILE"),ce(r)).then(s=>{!s||e("REMOVE_ITEM",{query:r})})}),RELEASE_ITEM:Ee(n,r=>{r.release()}),REMOVE_ITEM:Ee(n,(r,s,a,i)=>{const l=()=>{const u=r.id;An(n.items,u).archive(),e("DID_REMOVE_ITEM",{error:null,id:u,item:r}),Pt(e,n),s(ce(r))},o=n.options.server;r.origin===J.LOCAL&&o&&Le(o.remove)&&i.remove!==!1?(e("DID_START_ITEM_REMOVE",{id:r.id}),o.remove(r.source,()=>l(),u=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:r.id,error:$("error",0,u,null),status:{main:it(n.options.labelFileRemoveError)(u),sub:n.options.labelTapToRetry}})})):((i.revert&&r.origin!==J.LOCAL&&r.serverId!==null||n.options.chunkUploads&&r.file.size>n.options.chunkSize||n.options.chunkUploads&&n.options.chunkForce)&&r.revert(Qe(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")),l())}),ABORT_ITEM_LOAD:Ee(n,r=>{r.abortLoad()}),ABORT_ITEM_PROCESSING:Ee(n,r=>{if(r.serverId){e("REVERT_ITEM_PROCESSING",{id:r.id});return}r.abortProcessing().then(()=>{n.options.instantUpload&&e("REMOVE_ITEM",{query:r.id})})}),REQUEST_REVERT_ITEM_PROCESSING:Ee(n,r=>{if(!n.options.instantUpload){e("REVERT_ITEM_PROCESSING",{query:r});return}const s=l=>{!l||e("REVERT_ITEM_PROCESSING",{query:r})},a=t("GET_BEFORE_REMOVE_FILE");if(!a)return s(!0);const i=a(ce(r));if(i==null)return s(!0);if(typeof i=="boolean")return s(i);typeof i.then=="function"&&i.then(s)}),REVERT_ITEM_PROCESSING:Ee(n,r=>{r.revert(Qe(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(()=>{(n.options.instantUpload||$i(r))&&e("REMOVE_ITEM",{query:r.id})}).catch(()=>{})}),SET_OPTIONS:({options:r})=>{const s=Object.keys(r),a=Zi.filter(l=>s.includes(l));[...a,...Object.keys(r).filter(l=>!a.includes(l))].forEach(l=>{e(`SET_${Dt(l,"_").toUpperCase()}`,{value:r[l]})})}}),Zi=["server"],Kt=e=>e,ve=e=>document.createElement(e),Q=(e,t)=>{let n=e.childNodes[0];n?t!==n.nodeValue&&(n.nodeValue=t):(n=document.createTextNode(t),e.appendChild(n))},Ln=(e,t,n,r)=>{const s=(r%360-90)*Math.PI/180;return{x:e+n*Math.cos(s),y:t+n*Math.sin(s)}},Ji=(e,t,n,r,s,a)=>{const i=Ln(e,t,n,s),l=Ln(e,t,n,r);return["M",i.x,i.y,"A",n,n,0,a,0,l.x,l.y].join(" ")},ea=(e,t,n,r,s)=>{let a=1;return s>r&&s-r<=.5&&(a=0),r>s&&r-s>=.5&&(a=0),Ji(e,t,n,Math.min(.9999,r)*360,Math.min(.9999,s)*360,a)},ta=({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;const n=pt("svg");e.ref.path=pt("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(e.ref.path),e.ref.svg=n,e.appendChild(n)},na=({root:e,props:t})=>{if(t.opacity===0)return;t.align&&(e.element.dataset.align=t.align);const n=parseInt(K(e.ref.path,"stroke-width"),10),r=e.rect.element.width*.5;let s=0,a=0;t.spin?(s=0,a=.5):(s=0,a=t.progress);const i=ea(r,r,r-n,s,a);K(e.ref.path,"d",i),K(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},Cn=Z({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:ta,write:na,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),ra=({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},sa=({root:e,props:t})=>{const{isDisabled:n}=t,r=e.query("GET_DISABLED")||t.opacity===0;r&&!n?(t.isDisabled=!0,K(e.element,"disabled","disabled")):!r&&n&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))},Nr=Z({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:ra,write:sa}),wr=(e,t=".",n=1e3,r={})=>{const{labelBytes:s="bytes",labelKilobytes:a="KB",labelMegabytes:i="MB",labelGigabytes:l="GB"}=r;e=Math.round(Math.abs(e));const o=n,u=n*n,c=n*n*n;return e<o?`${e} ${s}`:e<u?`${Math.floor(e/o)} ${a}`:e<c?`${Nn(e/u,1,t)} ${i}`:`${Nn(e/c,2,t)} ${l}`},Nn=(e,t,n)=>e.toFixed(t).split(".").filter(r=>r!=="0").join(n),ia=({root:e,props:t})=>{const n=ve("span");n.className="filepond--file-info-main",K(n,"aria-hidden","true"),e.appendChild(n),e.ref.fileName=n;const r=ve("span");r.className="filepond--file-info-sub",e.appendChild(r),e.ref.fileSize=r,Q(r,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),Q(n,Kt(e.query("GET_ITEM_NAME",t.id)))},Vt=({root:e,props:t})=>{Q(e.ref.fileSize,wr(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"),e.query("GET_FILE_SIZE_LABELS",e.query))),Q(e.ref.fileName,Kt(e.query("GET_ITEM_NAME",t.id)))},wn=({root:e,props:t})=>{if(Xe(e.query("GET_ITEM_SIZE",t.id))){Vt({root:e,props:t});return}Q(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},aa=Z({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:oe({DID_LOAD_ITEM:Vt,DID_UPDATE_ITEM_META:Vt,DID_THROW_ITEM_LOAD_ERROR:wn,DID_THROW_ITEM_INVALID:wn}),didCreateView:e=>{Ge("CREATE_VIEW",X(C({},e),{view:e}))},create:ia,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),Fr=e=>Math.round(e*100),oa=({root:e})=>{const t=ve("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;const n=ve("span");n.className="filepond--file-status-sub",e.appendChild(n),e.ref.sub=n,Gr({root:e,action:{progress:null}})},Gr=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${Fr(t.progress)}%`;Q(e.ref.main,n),Q(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},la=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${Fr(t.progress)}%`;Q(e.ref.main,n),Q(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},ca=({root:e})=>{Q(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),Q(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},ua=({root:e})=>{Q(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),Q(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},da=({root:e})=>{Q(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),Q(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},Fn=({root:e})=>{Q(e.ref.main,""),Q(e.ref.sub,"")},$e=({root:e,action:t})=>{Q(e.ref.main,t.status.main),Q(e.ref.sub,t.status.sub)},fa=Z({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:oe({DID_LOAD_ITEM:Fn,DID_REVERT_ITEM_PROCESSING:Fn,DID_REQUEST_ITEM_PROCESSING:ca,DID_ABORT_ITEM_PROCESSING:ua,DID_COMPLETE_ITEM_PROCESSING:da,DID_UPDATE_ITEM_PROCESS_PROGRESS:la,DID_UPDATE_ITEM_LOAD_PROGRESS:Gr,DID_THROW_ITEM_LOAD_ERROR:$e,DID_THROW_ITEM_INVALID:$e,DID_THROW_ITEM_PROCESSING_ERROR:$e,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:$e,DID_THROW_ITEM_REMOVE_ERROR:$e}),didCreateView:e=>{Ge("CREATE_VIEW",X(C({},e),{view:e}))},create:oa,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),xt={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},qt=[];z(xt,e=>{qt.push(e)});const de=e=>{if(Yt(e)==="right")return 0;const t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},Ea=e=>e.ref.buttonAbortItemLoad.rect.element.width,at=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),ma=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),pa=e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION"),Ta=e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),Yt=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),_a={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:pa},processProgressIndicator:{opacity:0,align:Ta},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},Gn={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:de},status:{translateX:de}},bt={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},He={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:de},status:{translateX:de,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:de},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:Yt},info:{translateX:de},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:Yt},buttonRemoveItem:{opacity:1},info:{translateX:de},status:{opacity:1,translateX:de}},DID_LOAD_ITEM:Gn,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:de},status:{translateX:de}},DID_START_ITEM_PROCESSING:bt,DID_REQUEST_ITEM_PROCESSING:bt,DID_UPDATE_ITEM_PROCESS_PROGRESS:bt,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:de}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:de},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:Gn},Ia=Z({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),ga=({root:e,props:t})=>{const n=Object.keys(xt).reduce((d,T)=>(d[T]=C({},xt[T]),d),{}),{id:r}=t,s=e.query("GET_ALLOW_REVERT"),a=e.query("GET_ALLOW_REMOVE"),i=e.query("GET_ALLOW_PROCESS"),l=e.query("GET_INSTANT_UPLOAD"),o=e.query("IS_ASYNC"),u=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let c;o?i&&!s?c=d=>!/RevertItemProcessing/.test(d):!i&&s?c=d=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(d):!i&&!s&&(c=d=>!/Process/.test(d)):c=d=>!/Process/.test(d);const f=c?qt.filter(c):qt.concat();if(l&&s&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),o&&!s){const d=He.DID_COMPLETE_ITEM_PROCESSING;d.info.translateX=ma,d.info.translateY=at,d.status.translateY=at,d.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(o&&!i&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(d=>{He[d].status.translateY=at}),He.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Ea),u&&s){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const d=He.DID_COMPLETE_ITEM_PROCESSING;d.info.translateX=de,d.status.translateY=at,d.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}a||(n.RemoveItem.disabled=!0),z(n,(d,T)=>{const D=e.createChildView(Nr,{label:e.query(T.label),icon:e.query(T.icon),opacity:0});f.includes(d)&&e.appendChildView(D),T.disabled&&(D.element.setAttribute("disabled","disabled"),D.element.setAttribute("hidden","hidden")),D.element.dataset.align=e.query(`GET_STYLE_${T.align}`),D.element.classList.add(T.className),D.on("click",g=>{g.stopPropagation(),!T.disabled&&e.dispatch(T.action,{query:r})}),e.ref[`button${d}`]=D}),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(Ia)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(aa,{id:r})),e.ref.status=e.appendChildView(e.createChildView(fa,{id:r}));const m=e.appendChildView(e.createChildView(Cn,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));m.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=m;const E=e.appendChildView(e.createChildView(Cn,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));E.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=E,e.ref.activeStyles=[]},ha=({root:e,actions:t,props:n})=>{Ra({root:e,actions:t,props:n});let r=t.concat().filter(s=>/^DID_/.test(s.type)).reverse().find(s=>He[s.type]);if(r){e.ref.activeStyles=[];const s=He[r.type];z(_a,(a,i)=>{const l=e.ref[a];z(i,(o,u)=>{const c=s[a]&&typeof s[a][o]!="undefined"?s[a][o]:u;e.ref.activeStyles.push({control:l,key:o,value:c})})})}e.ref.activeStyles.forEach(({control:s,key:a,value:i})=>{s[a]=typeof i=="function"?i(e):i})},Ra=oe({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),Da=Z({create:ga,write:ha,didCreateView:e=>{Ge("CREATE_VIEW",X(C({},e),{view:e}))},name:"file"}),Oa=({root:e,props:t})=>{e.ref.fileName=ve("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(Da,{id:t.id})),e.ref.data=!1},Sa=({root:e,props:t})=>{Q(e.ref.fileName,Kt(e.query("GET_ITEM_NAME",t.id)))},ya=Z({create:Oa,ignoreRect:!0,write:oe({DID_LOAD_ITEM:Sa}),didCreateView:e=>{Ge("CREATE_VIEW",X(C({},e),{view:e}))},tag:"fieldset",name:"file-wrapper"}),Un={type:"spring",damping:.6,mass:7},va=({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:Un},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:Un},styles:["translateY"]}}].forEach(n=>{Aa(e,n,t.name)}),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},Aa=(e,t,n)=>{const r=Z({name:`panel-${t.name} filepond--${n}`,mixins:t.mixins,ignoreRectUpdate:!0}),s=e.createChildView(r,t.props);e.ref[t.name]=e.appendChildView(s)},Pa=({root:e,props:t})=>{if((e.ref.scalable===null||t.scalable!==e.ref.scalable)&&(e.ref.scalable=Ir(t.scalable)?t.scalable:!0,e.element.dataset.scalable=e.ref.scalable),!t.height)return;const n=e.ref.top.rect.element,r=e.ref.bottom.rect.element,s=Math.max(n.height+r.height,t.height);e.ref.center.translateY=n.height,e.ref.center.scaleY=(s-n.height-r.height)/100,e.ref.bottom.translateY=s-r.height},Ur=Z({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:Pa,create:va,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),Ma=e=>{const t=e.map(r=>r.id);let n;return{setIndex:r=>{n=r},getIndex:()=>n,getItemIndex:r=>t.indexOf(r.id)}},Bn={type:"spring",stiffness:.75,damping:.45,mass:10},Vn="spring",xn={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},ba=({root:e,props:t})=>{if(e.ref.handleClick=r=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(ya,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView(Ur,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,!e.query("GET_ALLOW_REORDER"))return;e.element.dataset.dragState="idle";const n=r=>{if(!r.isPrimary)return;let s=!1;const a={x:r.pageX,y:r.pageY};t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:r.offsetX,y:r.offsetY};const i=Ma(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:i});const l=u=>{if(!u.isPrimary)return;u.stopPropagation(),u.preventDefault(),t.dragOffset={x:u.pageX-a.x,y:u.pageY-a.y},t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!s&&(s=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:i})},o=u=>{!u.isPrimary||(document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",o),t.dragOffset={x:u.pageX-a.x,y:u.pageY-a.y},e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:i}),s&&setTimeout(()=>e.element.addEventListener("click",e.ref.handleClick),0))};document.addEventListener("pointermove",l),document.addEventListener("pointerup",o)};e.element.addEventListener("pointerdown",n)},La=oe({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),Ca=oe({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},({root:e,actions:t,props:n,shouldOptimize:r})=>{e.element.dataset.dragState==="drop"&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let s=t.concat().filter(i=>/^DID_/.test(i.type)).reverse().find(i=>xn[i.type]);s&&s.type!==n.currentState&&(n.currentState=s.type,e.element.dataset.filepondItemState=xn[n.currentState]||"");const a=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");a?r||(e.height=e.rect.element.width*a):(La({root:e,actions:t,props:n}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),r&&(e.ref.panel.height=null),e.ref.panel.height=e.height}),Na=Z({create:ba,write:Ca,destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:Vn,scaleY:Vn,translateX:Bn,translateY:Bn,opacity:{type:"tween",duration:150}}}});var Zt=(e,t)=>Math.max(1,Math.floor((e+1)/t));const Jt=(e,t,n)=>{if(!n)return;const r=e.rect.element.width,s=t.length;let a=null;if(s===0||n.top<t[0].rect.element.top)return-1;const l=t[0].rect.element,o=l.marginLeft+l.marginRight,u=l.width+o,c=Zt(r,u);if(c===1){for(let E=0;E<s;E++){const d=t[E],T=d.rect.outer.top+d.rect.element.height*.5;if(n.top<T)return E}return s}const f=l.marginTop+l.marginBottom,m=l.height+f;for(let E=0;E<s;E++){const d=E%c,T=Math.floor(E/c),D=d*u,g=T*m,O=g-l.marginTop,v=D+u,S=g+m+l.marginBottom;if(n.top<S&&n.top>O){if(n.left<v)return E;E!==s-1?a=E:a=null}}return a!==null?a:s},ot={height:0,width:0,get getHeight(){return this.height},set setHeight(e){(this.height===0||e===0)&&(this.height=e)},get getWidth(){return this.width},set setWidth(e){(this.width===0||e===0)&&(this.width=e)},setDimensions:function(e,t){(this.height===0||e===0)&&(this.height=e),(this.width===0||t===0)&&(this.width=t)}},wa=({root:e})=>{K(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},Fa=({root:e,action:t})=>{const{id:n,index:r,interactionMethod:s}=t;e.ref.addIndex=r;const a=Date.now();let i=a,l=1;if(s!==Te.NONE){l=0;const o=e.query("GET_ITEM_INSERT_INTERVAL"),u=a-e.ref.lastItemSpanwDate;i=u<o?a+(o-u):a}e.ref.lastItemSpanwDate=i,e.appendChildView(e.createChildView(Na,{spawnDate:i,id:n,opacity:l,interactionMethod:s}),r)},qn=(e,t,n,r=0,s=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=n,Date.now()>e.spawnDate&&(e.opacity===0&&Ga(e,t,n,r,s),e.scaleX=1,e.scaleY=1,e.opacity=1))},Ga=(e,t,n,r,s)=>{e.interactionMethod===Te.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=n):e.interactionMethod===Te.DROP?(e.translateX=null,e.translateX=t-r*20,e.translateY=null,e.translateY=n-s*10,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===Te.BROWSE?(e.translateY=null,e.translateY=n-30):e.interactionMethod===Te.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},Ua=({root:e,action:t})=>{const{id:n}=t,r=e.childViews.find(s=>s.id===n);!r||(r.scaleX=.9,r.scaleY=.9,r.opacity=0,r.markedForRemoval=!0)},Lt=e=>e.rect.element.height+e.rect.element.marginBottom*.5+e.rect.element.marginTop*.5,Ba=e=>e.rect.element.width+e.rect.element.marginLeft*.5+e.rect.element.marginRight*.5,Va=({root:e,action:t})=>{const{id:n,dragState:r}=t,s=e.query("GET_ITEM",{id:n}),a=e.childViews.find(D=>D.id===n),i=e.childViews.length,l=r.getItemIndex(s);if(!a)return;const o={x:a.dragOrigin.x+a.dragOffset.x+a.dragCenter.x,y:a.dragOrigin.y+a.dragOffset.y+a.dragCenter.y},u=Lt(a),c=Ba(a);let f=Math.floor(e.rect.outer.width/c);f>i&&(f=i);const m=Math.floor(i/f+1);ot.setHeight=u*m,ot.setWidth=c*f;var E={y:Math.floor(o.y/u),x:Math.floor(o.x/c),getGridIndex:function(){return o.y>ot.getHeight||o.y<0||o.x>ot.getWidth||o.x<0?l:this.y*f+this.x},getColIndex:function(){const g=e.query("GET_ACTIVE_ITEMS"),O=e.childViews.filter(b=>b.rect.element.height),v=g.map(b=>O.find(w=>w.id===b.id)),S=v.findIndex(b=>b===a),R=Lt(a),M=v.length;let U=M,y=0,P=0,F=0;for(let b=0;b<M;b++)if(y=Lt(v[b]),F=P,P=F+y,o.y<P){if(S>b){if(o.y<F+R){U=b;break}continue}U=b;break}return U}};const d=f>1?E.getGridIndex():E.getColIndex();e.dispatch("MOVE_ITEM",{query:a,index:d});const T=r.getIndex();if(T===void 0||T!==d){if(r.setIndex(d),T===void 0)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:l,target:d})}},xa=oe({DID_ADD_ITEM:Fa,DID_REMOVE_ITEM:Ua,DID_DRAG_ITEM:Va}),qa=({root:e,props:t,actions:n,shouldOptimize:r})=>{xa({root:e,props:t,actions:n});const{dragCoordinates:s}=t,a=e.rect.element.width,i=e.childViews.filter(v=>v.rect.element.height),l=e.query("GET_ACTIVE_ITEMS").map(v=>i.find(S=>S.id===v.id)).filter(v=>v),o=s?Jt(e,l,s):null,u=e.ref.addIndex||null;e.ref.addIndex=null;let c=0,f=0,m=0;if(l.length===0)return;const E=l[0].rect.element,d=E.marginTop+E.marginBottom,T=E.marginLeft+E.marginRight,D=E.width+T,g=E.height+d,O=Zt(a,D);if(O===1){let v=0,S=0;l.forEach((R,M)=>{if(o){let P=M-o;P===-2?S=-d*.25:P===-1?S=-d*.75:P===0?S=d*.75:P===1?S=d*.25:S=0}r&&(R.translateX=null,R.translateY=null),R.markedForRemoval||qn(R,0,v+S),v+=(R.rect.element.height+d)*(R.markedForRemoval?R.opacity:1)})}else{let v=0,S=0;l.forEach((R,M)=>{M===o&&(c=1),M===u&&(m+=1),R.markedForRemoval&&R.opacity<.5&&(f-=1);const U=M+m+c+f,y=U%O,P=Math.floor(U/O),F=y*D,b=P*g,w=Math.sign(F-v),x=Math.sign(b-S);v=F,S=b,!R.markedForRemoval&&(r&&(R.translateX=null,R.translateY=null),qn(R,F,b,w,x))})}},Ya=(e,t)=>t.filter(n=>n.data&&n.data.id?e.id===n.data.id:!0),Ha=Z({create:wa,write:qa,tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter(t=>t.markedForRemoval&&t.opacity===0&&t.resting).forEach(t=>{t._destroy(),e.removeChildView(t)})},filterFrameActionsForChild:Ya,mixins:{apis:["dragCoordinates"]}}),Wa=({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(Ha)),t.dragCoordinates=null,t.overflowing=!1},za=({root:e,props:t,action:n})=>{!e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")||(t.dragCoordinates={left:n.position.scopeLeft-e.ref.list.rect.element.left,top:n.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},ka=({props:e})=>{e.dragCoordinates=null},Xa=oe({DID_DRAG:za,DID_END_DRAG:ka}),ja=({root:e,props:t,actions:n})=>{if(Xa({root:e,props:t,actions:n}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){const r=Math.round(t.overflow);r!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=r)}},Qa=Z({create:Wa,write:ja,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),Oe=(e,t,n,r="")=>{n?K(e,t,r):e.removeAttribute(t)},$a=e=>{if(!(!e||e.value==="")){try{e.value=""}catch{}if(e.value){const t=ve("form"),n=e.parentNode,r=e.nextSibling;t.appendChild(e),t.reset(),r?n.insertBefore(e,r):n.appendChild(e)}}},Ka=({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,K(e.element,"name",e.query("GET_NAME")),K(e.element,"aria-controls",`filepond--assistant-${t.id}`),K(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),Br({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),Vr({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),xr({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),Ht({root:e}),qr({root:e,action:{value:e.query("GET_REQUIRED")}}),Yr({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=n=>{if(!e.element.value)return;const r=Array.from(e.element.files).map(s=>(s._relativePath=s.webkitRelativePath,s));setTimeout(()=>{t.onload(r),$a(e.element)},250)},e.element.addEventListener("change",e.ref.handleChange)},Br=({root:e,action:t})=>{!e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")||Oe(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},Vr=({root:e,action:t})=>{Oe(e.element,"multiple",t.value)},xr=({root:e,action:t})=>{Oe(e.element,"webkitdirectory",t.value)},Ht=({root:e})=>{const t=e.query("GET_DISABLED"),n=e.query("GET_ALLOW_BROWSE"),r=t||!n;Oe(e.element,"disabled",r)},qr=({root:e,action:t})=>{t.value?e.query("GET_TOTAL_ITEMS")===0&&Oe(e.element,"required",!0):Oe(e.element,"required",!1)},Yr=({root:e,action:t})=>{Oe(e.element,"capture",!!t.value,t.value===!0?"":t.value)},Yn=({root:e})=>{const{element:t}=e;e.query("GET_TOTAL_ITEMS")>0?(Oe(t,"required",!1),Oe(t,"name",!1)):(Oe(t,"name",!0,e.query("GET_NAME")),e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&Oe(t,"required",!0))},Za=({root:e})=>{!e.query("GET_CHECK_VALIDITY")||e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},Ja=Z({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:Ka,destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:oe({DID_LOAD_ITEM:Yn,DID_REMOVE_ITEM:Yn,DID_THROW_ITEM_INVALID:Za,DID_SET_DISABLED:Ht,DID_SET_ALLOW_BROWSE:Ht,DID_SET_ALLOW_DIRECTORIES_ONLY:xr,DID_SET_ALLOW_MULTIPLE:Vr,DID_SET_ACCEPTED_FILE_TYPES:Br,DID_SET_CAPTURE_METHOD:Yr,DID_SET_REQUIRED:qr})}),Hn={ENTER:13,SPACE:32},eo=({root:e,props:t})=>{const n=ve("label");K(n,"for",`filepond--browser-${t.id}`),K(n,"id",`filepond--drop-label-${t.id}`),K(n,"aria-hidden","true"),e.ref.handleKeyDown=r=>{(r.keyCode===Hn.ENTER||r.keyCode===Hn.SPACE)&&(r.preventDefault(),e.ref.label.click())},e.ref.handleClick=r=>{r.target===n||n.contains(r.target)||e.ref.label.click()},n.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),Hr(n,t.caption),e.appendChild(n),e.ref.label=n},Hr=(e,t)=>{e.innerHTML=t;const n=e.querySelector(".filepond--label-action");return n&&K(n,"tabindex","0"),t},to=Z({name:"drop-label",ignoreRect:!0,create:eo,destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:oe({DID_SET_LABEL_IDLE:({root:e,action:t})=>{Hr(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),no=Z({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),ro=({root:e})=>{const t=e.rect.element.width*.5,n=e.rect.element.height*.5;e.ref.blob=e.appendChildView(e.createChildView(no,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:n}))},so=({root:e,action:t})=>{if(!e.ref.blob){ro({root:e});return}e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1},io=({root:e})=>{!e.ref.blob||(e.ref.blob.opacity=0)},ao=({root:e})=>{!e.ref.blob||(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},oo=({root:e,props:t,actions:n})=>{lo({root:e,props:t,actions:n});const{blob:r}=e.ref;n.length===0&&r&&r.opacity===0&&(e.removeChildView(r),e.ref.blob=null)},lo=oe({DID_DRAG:so,DID_DROP:ao,DID_END_DRAG:io}),co=Z({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:oo}),Wr=(e,t)=>{try{const n=new DataTransfer;t.forEach(r=>{r instanceof File?n.items.add(r):n.items.add(new File([r],r.name,{type:r.type}))}),e.files=n.files}catch{return!1}return!0},uo=({root:e})=>e.ref.fields={},yt=(e,t)=>e.ref.fields[t],en=e=>{e.query("GET_ACTIVE_ITEMS").forEach(t=>{!e.ref.fields[t.id]||e.element.appendChild(e.ref.fields[t.id])})},Wn=({root:e})=>en(e),fo=({root:e,action:t})=>{const s=!(e.query("GET_ITEM",t.id).origin===J.LOCAL)&&e.query("SHOULD_UPDATE_FILE_INPUT"),a=ve("input");a.type=s?"file":"hidden",a.name=e.query("GET_NAME"),a.disabled=e.query("GET_DISABLED"),e.ref.fields[t.id]=a,en(e)},Eo=({root:e,action:t})=>{const n=yt(e,t.id);if(!n||(t.serverFileReference!==null&&(n.value=t.serverFileReference),!e.query("SHOULD_UPDATE_FILE_INPUT")))return;const r=e.query("GET_ITEM",t.id);Wr(n,[r.file])},mo=({root:e,action:t})=>{!e.query("SHOULD_UPDATE_FILE_INPUT")||setTimeout(()=>{const n=yt(e,t.id);!n||Wr(n,[t.file])},0)},po=({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},To=({root:e,action:t})=>{const n=yt(e,t.id);!n||(n.parentNode&&n.parentNode.removeChild(n),delete e.ref.fields[t.id])},_o=({root:e,action:t})=>{const n=yt(e,t.id);!n||(t.value===null?n.removeAttribute("value"):n.value=t.value,en(e))},Io=oe({DID_SET_DISABLED:po,DID_ADD_ITEM:fo,DID_LOAD_ITEM:Eo,DID_REMOVE_ITEM:To,DID_DEFINE_VALUE:_o,DID_PREPARE_OUTPUT:mo,DID_REORDER_ITEMS:Wn,DID_SORT_ITEMS:Wn}),go=Z({tag:"fieldset",name:"data",create:uo,write:Io,ignoreRect:!0}),ho=e=>"getRootNode"in e?e.getRootNode():document,Ro=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],Do=["css","csv","html","txt"],Oo={zip:"zip|compressed",epub:"application/epub+zip"},zr=(e="")=>(e=e.toLowerCase(),Ro.includes(e)?"image/"+(e==="jpg"?"jpeg":e==="svg"?"svg+xml":e):Do.includes(e)?"text/"+e:Oo[e]||""),tn=e=>new Promise((t,n)=>{const r=Lo(e);if(r.length&&!So(e))return t(r);yo(e).then(t)}),So=e=>e.files?e.files.length>0:!1,yo=e=>new Promise((t,n)=>{const r=(e.items?Array.from(e.items):[]).filter(s=>vo(s)).map(s=>Ao(s));if(!r.length){t(e.files?Array.from(e.files):[]);return}Promise.all(r).then(s=>{const a=[];s.forEach(i=>{a.push.apply(a,i)}),t(a.filter(i=>i).map(i=>(i._relativePath||(i._relativePath=i.webkitRelativePath),i)))}).catch(console.error)}),vo=e=>{if(kr(e)){const t=nn(e);if(t)return t.isFile||t.isDirectory}return e.kind==="file"},Ao=e=>new Promise((t,n)=>{if(bo(e)){Po(nn(e)).then(t).catch(n);return}t([e.getAsFile()])}),Po=e=>new Promise((t,n)=>{const r=[];let s=0,a=0;const i=()=>{a===0&&s===0&&t(r)},l=o=>{s++;const u=o.createReader(),c=()=>{u.readEntries(f=>{if(f.length===0){s--,i();return}f.forEach(m=>{m.isDirectory?l(m):(a++,m.file(E=>{const d=Mo(E);m.fullPath&&(d._relativePath=m.fullPath),r.push(d),a--,i()}))}),c()},n)};c()};l(e)}),Mo=e=>{if(e.type.length)return e;const t=e.lastModifiedDate,n=e.name,r=zr(St(e.name));return r.length&&(e=e.slice(0,e.size,r),e.name=n,e.lastModifiedDate=t),e},bo=e=>kr(e)&&(nn(e)||{}).isDirectory,kr=e=>"webkitGetAsEntry"in e,nn=e=>e.webkitGetAsEntry(),Lo=e=>{let t=[];try{if(t=No(e),t.length)return t;t=Co(e)}catch{}return t},Co=e=>{let t=e.getData("url");return typeof t=="string"&&t.length?[t]:[]},No=e=>{let t=e.getData("text/html");if(typeof t=="string"&&t.length){const n=t.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},_t=[],Fe=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),wo=(e,t,n)=>{const r=Fo(t),s={element:e,filterElement:n,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return s.destroy=r.addListener(s),s},Fo=e=>{const t=_t.find(r=>r.element===e);if(t)return t;const n=Go(e);return _t.push(n),n},Go=e=>{const t=[],n={dragenter:Bo,dragover:Vo,dragleave:qo,drop:xo},r={};z(n,(a,i)=>{r[a]=i(e,t),e.addEventListener(a,r[a],!1)});const s={element:e,addListener:a=>(t.push(a),()=>{t.splice(t.indexOf(a),1),t.length===0&&(_t.splice(_t.indexOf(s),1),z(n,i=>{e.removeEventListener(i,r[i],!1)}))})};return s},Uo=(e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)),rn=(e,t)=>{const n=ho(t),r=Uo(n,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return r===t||t.contains(r)};let Xr=null;const lt=(e,t)=>{try{e.dropEffect=t}catch{}},Bo=(e,t)=>n=>{n.preventDefault(),Xr=n.target,t.forEach(r=>{const{element:s,onenter:a}=r;rn(n,s)&&(r.state="enter",a(Fe(n)))})},Vo=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;tn(r).then(s=>{let a=!1;t.some(i=>{const{filterElement:l,element:o,onenter:u,onexit:c,ondrag:f,allowdrop:m}=i;lt(r,"copy");const E=m(s);if(!E){lt(r,"none");return}if(rn(n,o)){if(a=!0,i.state===null){i.state="enter",u(Fe(n));return}if(i.state="over",l&&!E){lt(r,"none");return}f(Fe(n))}else l&&!a&&lt(r,"none"),i.state&&(i.state=null,c(Fe(n)))})})},xo=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;tn(r).then(s=>{t.forEach(a=>{const{filterElement:i,element:l,ondrop:o,onexit:u,allowdrop:c}=a;if(a.state=null,!(i&&!rn(n,l))){if(!c(s))return u(Fe(n));o(Fe(n),s)}})})},qo=(e,t)=>n=>{Xr===n.target&&t.forEach(r=>{const{onexit:s}=r;r.state=null,s(Fe(n))})},Yo=(e,t,n)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:r,requiresDropOnElement:s,filterItems:a=c=>c}=n,i=wo(e,r?document.documentElement:e,s);let l="",o="";i.allowdrop=c=>t(a(c)),i.ondrop=(c,f)=>{const m=a(f);if(!t(m)){u.ondragend(c);return}o="drag-drop",u.onload(m,c)},i.ondrag=c=>{u.ondrag(c)},i.onenter=c=>{o="drag-over",u.ondragstart(c)},i.onexit=c=>{o="drag-exit",u.ondragend(c)};const u={updateHopperState:()=>{l!==o&&(e.dataset.hopperState=o,l=o)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{i.destroy()}};return u};let Wt=!1;const We=[],jr=e=>{const t=document.activeElement;if(t&&/textarea|input/i.test(t.nodeName)){let n=!1,r=t;for(;r!==document.body;){if(r.classList.contains("filepond--root")){n=!0;break}r=r.parentNode}if(!n)return}tn(e.clipboardData).then(n=>{!n.length||We.forEach(r=>r(n))})},Ho=e=>{We.includes(e)||(We.push(e),!Wt&&(Wt=!0,document.addEventListener("paste",jr)))},Wo=e=>{jt(We,We.indexOf(e)),We.length===0&&(document.removeEventListener("paste",jr),Wt=!1)},zo=()=>{const e=n=>{t.onload(n)},t={destroy:()=>{Wo(e)},onload:()=>{}};return Ho(e),t},ko=({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,K(e.element,"role","status"),K(e.element,"aria-live","polite"),K(e.element,"aria-relevant","additions")};let zn=null,kn=null;const Ct=[],vt=(e,t)=>{e.element.textContent=t},Xo=e=>{e.element.textContent=""},Qr=(e,t,n)=>{const r=e.query("GET_TOTAL_ITEMS");vt(e,`${n} ${t}, ${r} ${r===1?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(kn),kn=setTimeout(()=>{Xo(e)},1500)},$r=e=>e.element.parentNode.contains(document.activeElement),jo=({root:e,action:t})=>{if(!$r(e))return;e.element.textContent="";const n=e.query("GET_ITEM",t.id);Ct.push(n.filename),clearTimeout(zn),zn=setTimeout(()=>{Qr(e,Ct.join(", "),e.query("GET_LABEL_FILE_ADDED")),Ct.length=0},750)},Qo=({root:e,action:t})=>{if(!$r(e))return;const n=t.item;Qr(e,n.filename,e.query("GET_LABEL_FILE_REMOVED"))},$o=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,s=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");vt(e,`${r} ${s}`)},Xn=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,s=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");vt(e,`${r} ${s}`)},ct=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename;vt(e,`${t.status.main} ${r} ${t.status.sub}`)},Ko=Z({create:ko,ignoreRect:!0,ignoreRectUpdate:!0,write:oe({DID_LOAD_ITEM:jo,DID_REMOVE_ITEM:Qo,DID_COMPLETE_ITEM_PROCESSING:$o,DID_ABORT_ITEM_PROCESSING:Xn,DID_REVERT_ITEM_PROCESSING:Xn,DID_THROW_ITEM_REMOVE_ERROR:ct,DID_THROW_ITEM_LOAD_ERROR:ct,DID_THROW_ITEM_INVALID:ct,DID_THROW_ITEM_PROCESSING_ERROR:ct}),tag:"span",name:"assistant"}),Kr=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),n=>n.charAt(1).toUpperCase()),Zr=(e,t=16,n=!0)=>{let r=Date.now(),s=null;return(...a)=>{clearTimeout(s);const i=Date.now()-r,l=()=>{r=Date.now(),e(...a)};i<t?n||(s=setTimeout(l,t-i)):l()}},Zo=1e6,It=e=>e.preventDefault(),Jo=({root:e,props:t})=>{const n=e.query("GET_ID");n&&(e.element.id=n);const r=e.query("GET_CLASS_NAME");r&&r.split(" ").filter(o=>o.length).forEach(o=>{e.element.classList.add(o)}),e.ref.label=e.appendChildView(e.createChildView(to,X(C({},t),{translateY:null,caption:e.query("GET_LABEL_IDLE")}))),e.ref.list=e.appendChildView(e.createChildView(Qa,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(Ur,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(Ko,C({},t))),e.ref.data=e.appendChildView(e.createChildView(go,C({},t))),e.ref.measure=ve("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter(o=>!ye(o.value)).map(({name:o,value:u})=>{e.element.dataset[o]=u}),e.ref.widthPrevious=null,e.ref.widthUpdated=Zr(()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")},250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];const s=window.matchMedia("(pointer: fine) and (hover: hover)").matches,a="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&a&&!s&&(e.element.addEventListener("touchmove",It,{passive:!1}),e.element.addEventListener("gesturestart",It));const i=e.query("GET_CREDITS");if(i.length===2){const o=document.createElement("a");o.className="filepond--credits",o.setAttribute("aria-hidden","true"),o.href=i[0],o.tabindex=-1,o.target="_blank",o.rel="noopener noreferrer",o.textContent=i[1],e.element.appendChild(o),e.ref.credits=o}},el=({root:e,props:t,actions:n})=>{if(il({root:e,props:t,actions:n}),n.filter(M=>/^DID_SET_STYLE_/.test(M.type)).filter(M=>!ye(M.data.value)).map(({type:M,data:U})=>{const y=Kr(M.substr(8).toLowerCase(),"_");e.element.dataset[y]=U.value,e.invalidateLayout()}),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let r=e.ref.bounds;r||(r=e.ref.bounds=rl(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);const{hopper:s,label:a,list:i,panel:l}=e.ref;s&&s.updateHopperState();const o=e.query("GET_PANEL_ASPECT_RATIO"),u=e.query("GET_ALLOW_MULTIPLE"),c=e.query("GET_TOTAL_ITEMS"),f=u?e.query("GET_MAX_FILES")||Zo:1,m=c===f,E=n.find(M=>M.type==="DID_ADD_ITEM");if(m&&E){const M=E.data.interactionMethod;a.opacity=0,u?a.translateY=-40:M===Te.API?a.translateX=40:M===Te.BROWSE?a.translateY=40:a.translateY=30}else m||(a.opacity=1,a.translateX=0,a.translateY=0);const d=tl(e),T=nl(e),D=a.rect.element.height,g=!u||m?0:D,O=m?i.rect.element.marginTop:0,v=c===0?0:i.rect.element.marginBottom,S=g+O+T.visual+v,R=g+O+T.bounds+v;if(i.translateY=Math.max(0,g-i.rect.element.marginTop)-d.top,o){const M=e.rect.element.width,U=M*o;o!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=o,e.ref.updateHistory=[]);const y=e.ref.updateHistory;y.push(M);const P=2;if(y.length>P*2){const b=y.length,w=b-10;let x=0;for(let _=b;_>=w;_--)if(y[_]===y[_-2]&&x++,x>=P)return}l.scalable=!1,l.height=U;const F=U-g-(v-d.bottom)-(m?O:0);T.visual>F?i.overflow=F:i.overflow=null,e.height=U}else if(r.fixedHeight){l.scalable=!1;const M=r.fixedHeight-g-(v-d.bottom)-(m?O:0);T.visual>M?i.overflow=M:i.overflow=null}else if(r.cappedHeight){const M=S>=r.cappedHeight,U=Math.min(r.cappedHeight,S);l.scalable=!0,l.height=M?U:U-d.top-d.bottom;const y=U-g-(v-d.bottom)-(m?O:0);S>r.cappedHeight&&T.visual>y?i.overflow=y:i.overflow=null,e.height=Math.min(r.cappedHeight,R-d.top-d.bottom)}else{const M=c>0?d.top+d.bottom:0;l.scalable=!0,l.height=Math.max(D,S-M),e.height=Math.max(D,R-M)}e.ref.credits&&l.heightCurrent&&(e.ref.credits.style.transform=`translateY(${l.heightCurrent}px)`)},tl=e=>{const t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},nl=e=>{let t=0,n=0;const r=e.ref.list,s=r.childViews[0],a=s.childViews.filter(O=>O.rect.element.height),i=e.query("GET_ACTIVE_ITEMS").map(O=>a.find(v=>v.id===O.id)).filter(O=>O);if(i.length===0)return{visual:t,bounds:n};const l=s.rect.element.width,o=Jt(s,i,r.dragCoordinates),u=i[0].rect.element,c=u.marginTop+u.marginBottom,f=u.marginLeft+u.marginRight,m=u.width+f,E=u.height+c,d=typeof o!="undefined"&&o>=0?1:0,T=i.find(O=>O.markedForRemoval&&O.opacity<.45)?-1:0,D=i.length+d+T,g=Zt(l,m);return g===1?i.forEach(O=>{const v=O.rect.element.height+c;n+=v,t+=v*O.opacity}):(n=Math.ceil(D/g)*E,t=n),{visual:t,bounds:n}},rl=e=>{const t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:t===0?null:t}},sn=(e,t)=>{const n=e.query("GET_ALLOW_REPLACE"),r=e.query("GET_ALLOW_MULTIPLE"),s=e.query("GET_TOTAL_ITEMS");let a=e.query("GET_MAX_FILES");const i=t.length;return!r&&i>1?!0:(a=r||n?a:1,Xe(a)&&s+i>a?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:$("warning",0,"Max files")}),!0):!1)},sl=(e,t,n)=>{const r=e.childViews[0];return Jt(r,t,{left:n.scopeLeft-r.rect.element.left,top:n.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},jn=e=>{const t=e.query("GET_ALLOW_DROP"),n=e.query("GET_DISABLED"),r=t&&!n;if(r&&!e.ref.hopper){const s=Yo(e.element,a=>{const i=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return e.query("GET_DROP_VALIDATION")?a.every(o=>Ge("ALLOW_HOPPER_ITEM",o,{query:e.query}).every(u=>u===!0)&&i(o)):!0},{filterItems:a=>{const i=e.query("GET_IGNORED_FILES");return a.filter(l=>ke(l)?!i.includes(l.name.toLowerCase()):!0)},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});s.onload=(a,i)=>{const o=e.ref.list.childViews[0].childViews.filter(c=>c.rect.element.height),u=e.query("GET_ACTIVE_ITEMS").map(c=>o.find(f=>f.id===c.id)).filter(c=>c);Re("ADD_ITEMS",a,{dispatch:e.dispatch}).then(c=>{if(sn(e,c))return!1;e.dispatch("ADD_ITEMS",{items:c,index:sl(e.ref.list,u,i),interactionMethod:Te.DROP})}),e.dispatch("DID_DROP",{position:i}),e.dispatch("DID_END_DRAG",{position:i})},s.ondragstart=a=>{e.dispatch("DID_START_DRAG",{position:a})},s.ondrag=Zr(a=>{e.dispatch("DID_DRAG",{position:a})}),s.ondragend=a=>{e.dispatch("DID_END_DRAG",{position:a})},e.ref.hopper=s,e.ref.drip=e.appendChildView(e.createChildView(co))}else!r&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},Qn=(e,t)=>{const n=e.query("GET_ALLOW_BROWSE"),r=e.query("GET_DISABLED"),s=n&&!r;s&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(Ja,X(C({},t),{onload:a=>{Re("ADD_ITEMS",a,{dispatch:e.dispatch}).then(i=>{if(sn(e,i))return!1;e.dispatch("ADD_ITEMS",{items:i,index:-1,interactionMethod:Te.BROWSE})})}})),0):!s&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},$n=e=>{const t=e.query("GET_ALLOW_PASTE"),n=e.query("GET_DISABLED"),r=t&&!n;r&&!e.ref.paster?(e.ref.paster=zo(),e.ref.paster.onload=s=>{Re("ADD_ITEMS",s,{dispatch:e.dispatch}).then(a=>{if(sn(e,a))return!1;e.dispatch("ADD_ITEMS",{items:a,index:-1,interactionMethod:Te.PASTE})})}):!r&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},il=oe({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{Qn(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{jn(e)},DID_SET_ALLOW_PASTE:({root:e})=>{$n(e)},DID_SET_DISABLED:({root:e,props:t})=>{jn(e),$n(e),Qn(e,t),e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),al=Z({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:Jo,write:el,destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",It),e.element.removeEventListener("gesturestart",It)},mixins:{styles:["height"]}}),ol=(e={})=>{let t=null;const n=Tt(),r=Ds(oi(n),[vi,ui(n)],[Ki,ci(n)]);r.dispatch("SET_OPTIONS",{options:e});const s=()=>{document.hidden||r.dispatch("KICK")};document.addEventListener("visibilitychange",s);let a=null,i=!1,l=!1,o=null,u=null;const c=()=>{i||(i=!0),clearTimeout(a),a=setTimeout(()=>{i=!1,o=null,u=null,l&&(l=!1,r.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",c);const f=al(r,{id:Xt()});let m=!1,E=!1;const d={_read:()=>{i&&(u=window.innerWidth,o||(o=u),!l&&u!==o&&(r.dispatch("DID_START_RESIZE"),l=!0)),E&&m&&(m=f.element.offsetParent===null),!m&&(f._read(),E=f.rect.element.hidden)},_write:p=>{const h=r.processActionQueue().filter(L=>!/^SET_/.test(L.type));m&&!h.length||(O(h),m=f._write(p,h,l),Ei(r.query("GET_ITEMS")),m&&r.processDispatchQueue())}},T=p=>h=>{const L={type:p};if(!h)return L;if(h.hasOwnProperty("error")&&(L.error=h.error?C({},h.error):null),h.status&&(L.status=C({},h.status)),h.file&&(L.output=h.file),h.source)L.file=h.source;else if(h.item||h.id){const A=h.item?h.item:r.query("GET_ITEM",h.id);L.file=A?ce(A):null}return h.items&&(L.items=h.items.map(ce)),/progress/.test(p)&&(L.progress=h.progress),h.hasOwnProperty("origin")&&h.hasOwnProperty("target")&&(L.origin=h.origin,L.target=h.target),L},D={DID_DESTROY:T("destroy"),DID_INIT:T("init"),DID_THROW_MAX_FILES:T("warning"),DID_INIT_ITEM:T("initfile"),DID_START_ITEM_LOAD:T("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:T("addfileprogress"),DID_LOAD_ITEM:T("addfile"),DID_THROW_ITEM_INVALID:[T("error"),T("addfile")],DID_THROW_ITEM_LOAD_ERROR:[T("error"),T("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[T("error"),T("removefile")],DID_PREPARE_OUTPUT:T("preparefile"),DID_START_ITEM_PROCESSING:T("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:T("processfileprogress"),DID_ABORT_ITEM_PROCESSING:T("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:T("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:T("processfiles"),DID_REVERT_ITEM_PROCESSING:T("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[T("error"),T("processfile")],DID_REMOVE_ITEM:T("removefile"),DID_UPDATE_ITEMS:T("updatefiles"),DID_ACTIVATE_ITEM:T("activatefile"),DID_REORDER_ITEMS:T("reorderfiles")},g=p=>{const h=C({pond:N},p);delete h.type,f.element.dispatchEvent(new CustomEvent(`FilePond:${p.type}`,{detail:h,bubbles:!0,cancelable:!0,composed:!0}));const L=[];p.hasOwnProperty("error")&&L.push(p.error),p.hasOwnProperty("file")&&L.push(p.file);const A=["type","error","file"];Object.keys(p).filter(H=>!A.includes(H)).forEach(H=>L.push(p[H])),N.fire(p.type,...L);const B=r.query(`GET_ON${p.type.toUpperCase()}`);B&&B(...L)},O=p=>{!p.length||p.filter(h=>D[h.type]).forEach(h=>{const L=D[h.type];(Array.isArray(L)?L:[L]).forEach(A=>{h.type==="DID_INIT_ITEM"?g(A(h.data)):setTimeout(()=>{g(A(h.data))},0)})})},v=p=>r.dispatch("SET_OPTIONS",{options:p}),S=p=>r.query("GET_ACTIVE_ITEM",p),R=p=>new Promise((h,L)=>{r.dispatch("REQUEST_ITEM_PREPARE",{query:p,success:A=>{h(A)},failure:A=>{L(A)}})}),M=(p,h={})=>new Promise((L,A)=>{P([{source:p,options:h}],{index:h.index}).then(B=>L(B&&B[0])).catch(A)}),U=p=>p.file&&p.id,y=(p,h)=>(typeof p=="object"&&!U(p)&&!h&&(h=p,p=void 0),r.dispatch("REMOVE_ITEM",X(C({},h),{query:p})),r.query("GET_ACTIVE_ITEM",p)===null),P=(...p)=>new Promise((h,L)=>{const A=[],B={};if(ht(p[0]))A.push.apply(A,p[0]),Object.assign(B,p[1]||{});else{const H=p[p.length-1];typeof H=="object"&&!(H instanceof Blob)&&Object.assign(B,p.pop()),A.push(...p)}r.dispatch("ADD_ITEMS",{items:A,index:B.index,interactionMethod:Te.API,success:h,failure:L})}),F=()=>r.query("GET_ACTIVE_ITEMS"),b=p=>new Promise((h,L)=>{r.dispatch("REQUEST_ITEM_PROCESSING",{query:p,success:A=>{h(A)},failure:A=>{L(A)}})}),w=(...p)=>{const h=Array.isArray(p[0])?p[0]:p,L=h.length?h:F();return Promise.all(L.map(R))},x=(...p)=>{const h=Array.isArray(p[0])?p[0]:p;if(!h.length){const L=F().filter(A=>!(A.status===G.IDLE&&A.origin===J.LOCAL)&&A.status!==G.PROCESSING&&A.status!==G.PROCESSING_COMPLETE&&A.status!==G.PROCESSING_REVERT_ERROR);return Promise.all(L.map(b))}return Promise.all(h.map(b))},_=(...p)=>{const h=Array.isArray(p[0])?p[0]:p;let L;typeof h[h.length-1]=="object"?L=h.pop():Array.isArray(p[0])&&(L=p[1]);const A=F();return h.length?h.map(H=>be(H)?A[H]?A[H].id:null:H).filter(H=>H).map(H=>y(H,L)):Promise.all(A.map(H=>y(H,L)))},N=X(C(C(C({},Ot()),d),li(r,n)),{setOptions:v,addFile:M,addFiles:P,getFile:S,processFile:b,prepareFile:R,removeFile:y,moveFile:(p,h)=>r.dispatch("MOVE_ITEM",{query:p,index:h}),getFiles:F,processFiles:x,removeFiles:_,prepareFiles:w,sort:p=>r.dispatch("SORT",{compare:p}),browse:()=>{var p=f.element.querySelector("input[type=file]");p&&p.click()},destroy:()=>{N.fire("destroy",f.element),r.dispatch("ABORT_ALL"),f._destroy(),window.removeEventListener("resize",c),document.removeEventListener("visibilitychange",s),r.dispatch("DID_DESTROY")},insertBefore:p=>gn(f.element,p),insertAfter:p=>hn(f.element,p),appendTo:p=>p.appendChild(f.element),replaceElement:p=>{gn(f.element,p),p.parentNode.removeChild(p),t=p},restoreElement:()=>{!t||(hn(t,f.element),f.element.parentNode.removeChild(f.element),t=null)},isAttachedTo:p=>f.element===p||t===p,element:{get:()=>f.element},status:{get:()=>r.query("GET_STATUS")}});return r.dispatch("DID_INIT"),Me(N)},Jr=(e={})=>{const t={};return z(Tt(),(r,s)=>{t[r]=s[0]}),ol(C(C({},t),e))},ll=e=>e.charAt(0).toLowerCase()+e.slice(1),cl=e=>Kr(e.replace(/^data-/,"")),es=(e,t)=>{z(t,(n,r)=>{z(e,(s,a)=>{const i=new RegExp(n);if(!i.test(s)||(delete e[s],r===!1))return;if(ae(r)){e[r]=a;return}const o=r.group;ne(r)&&!e[o]&&(e[o]={}),e[o][ll(s.replace(i,""))]=a}),r.mapping&&es(e[r.group],r.mapping)})},ul=(e,t={})=>{const n=[];z(e.attributes,s=>{n.push(e.attributes[s])});const r=n.filter(s=>s.name).reduce((s,a)=>{const i=K(e,a.name);return s[cl(a.name)]=i===a.name?!0:i,s},{});return es(r,t),r},dl=(e,t={})=>{const n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Ge("SET_ATTRIBUTE_TO_OPTION_MAP",n);const r=C({},t),s=ul(e.nodeName==="FIELDSET"?e.querySelector("input[type=file]"):e,n);Object.keys(s).forEach(i=>{ne(s[i])?(ne(r[i])||(r[i]={}),Object.assign(r[i],s[i])):r[i]=s[i]}),r.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(i=>({source:i.value,options:{type:i.dataset.type}})));const a=Jr(r);return e.files&&Array.from(e.files).forEach(i=>{a.addFile(i)}),a.replaceElement(e),a},fl=(...e)=>Rs(e[0])?dl(...e):Jr(...e),El=["fire","_read","_write"],Kn=e=>{const t={};return Dr(e,t,El),t},ml=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,(n,r)=>t[r]),pl=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),r=new Worker(n);return{transfer:(s,a)=>{},post:(s,a,i)=>{const l=Xt();r.onmessage=o=>{o.data.id===l&&a(o.data.message)},r.postMessage({id:l,message:s},i)},terminate:()=>{r.terminate(),URL.revokeObjectURL(n)}}},Tl=e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r)},r.onerror=s=>{n(s)},r.src=e}),ts=(e,t)=>{const n=e.slice(0,e.size,e.type);return n.lastModifiedDate=e.lastModifiedDate,n.name=t,n},_l=e=>ts(e,e.name),Zn=[],Il=e=>{if(Zn.includes(e))return;Zn.push(e);const t=e({addFilter:pi,utils:{Type:I,forin:z,isString:ae,isFile:ke,toNaturalFileSize:wr,replaceInString:ml,getExtensionFromFilename:St,getFilenameWithoutExtension:Lr,guesstimateMimeType:zr,getFileFromBlob:ze,getFilenameFromURL:tt,createRoute:oe,createWorker:pl,createView:Z,createItemAPI:ce,loadImage:Tl,copyFile:_l,renameFile:ts,createBlob:Pr,applyFilterChain:Re,text:Q,getNumericAspectRatioFromString:yr},views:{fileActionButton:Nr}});Ti(t.options)},gl=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",hl=()=>"Promise"in window,Rl=()=>"slice"in Blob.prototype,Dl=()=>"URL"in window&&"createObjectURL"in window.URL,Ol=()=>"visibilityState"in document,Sl=()=>"performance"in window,yl=()=>"supports"in(window.CSS||{}),vl=()=>/MSIE|Trident/.test(window.navigator.userAgent),zt=(()=>{const e=Tr()&&!gl()&&Ol()&&hl()&&Rl()&&Dl()&&Sl()&&(yl()||vl());return()=>e})(),Ae={apps:[]},Al="filepond",Ue=()=>{};let Jn={},Et=Ue,Nt=Ue,er=Ue,tr=Ue,gt=Ue,nr=Ue,rr=Ue;if(zt()){Xs(()=>{Ae.apps.forEach(n=>n._read())},n=>{Ae.apps.forEach(r=>r._write(n))});const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:zt,create:Et,destroy:Nt,parse:er,find:tr,registerPlugin:gt,setOptions:rr}})),document.removeEventListener("DOMContentLoaded",e)};document.readyState!=="loading"?setTimeout(()=>e(),0):document.addEventListener("DOMContentLoaded",e);const t=()=>z(Tt(),(n,r)=>{Jn[n]=r[1]});Jn={},t(),Et=(...n)=>{const r=fl(...n);return r.on("destroy",Nt),Ae.apps.push(r),Kn(r)},Nt=n=>{const r=Ae.apps.findIndex(s=>s.isAttachedTo(n));return r>=0?(Ae.apps.splice(r,1)[0].restoreElement(),!0):!1},er=n=>Array.from(n.querySelectorAll(`.${Al}`)).filter(a=>!Ae.apps.find(i=>i.isAttachedTo(a))).map(a=>Et(a)),tr=n=>{const r=Ae.apps.find(s=>s.isAttachedTo(n));return r?Kn(r):null},gt=(...n)=>{n.forEach(Il),t()},nr=()=>{const n={};return z(Tt(),(r,s)=>{n[r]=s[0]}),n},rr=n=>(ne(n)&&(Ae.apps.forEach(r=>{r.setOptions(n)}),_i(n)),nr())}function Pl(e){let t,n;return{c(){t=ee("div"),n=ee("input"),this.h()},l(r){t=te(r,"DIV",{class:!0});var s=re(t);n=te(s,"INPUT",{type:!0,id:!0,name:!0,class:!0,accept:!0,capture:!0}),s.forEach(W),this.h()},h(){q(n,"type","file"),q(n,"id",e[1]),q(n,"name",e[2]),q(n,"class",e[0]),q(n,"accept",e[6]),n.multiple=e[3],n.required=e[4],q(n,"capture",e[5]),q(t,"class","filepond--wrapper")},m(r,s){Se(r,t,s),Y(t,n),e[24](n)},p(r,[s]){s&2&&q(n,"id",r[1]),s&4&&q(n,"name",r[2]),s&1&&q(n,"class",r[0]),s&64&&q(n,"accept",r[6]),s&8&&(n.multiple=r[3]),s&16&&(n.required=r[4]),s&32&&q(n,"capture",r[5])},i:un,o:un,d(r){r&&W(t),e[24](null)}}}function Ml(e,t,n){const r=gt,s=zt();let a,i,{class:l=void 0}=t,{id:o=void 0}=t,{name:u=void 0}=t,{allowMultiple:c=void 0}=t,{required:f=void 0}=t,{captureMethod:m=void 0}=t,{acceptedFileTypes:E=void 0}=t;const d=()=>{};let{addFile:T=d}=t,{addFiles:D=d}=t,{browse:g=d}=t,{fireSync:O=d}=t,{getFile:v=d}=t,{getFiles:S=d}=t,{moveFile:R=d}=t,{prepareFile:M=d}=t,{prepareFiles:U=d}=t,{processFile:y=d}=t,{processFiles:P=d}=t,{removeFile:F=d}=t,{removeFiles:b=d}=t,{sort:w=d}=t;us(()=>{!s||(i?i.setOptions(t):(i=Et(a,C({},t)),n(8,T=i.addFile),n(9,D=i.addFiles),n(19,F=i.removeFile),n(20,b=i.removeFiles),n(10,g=i.browse),n(11,O=i.fireSync),n(12,v=i.getFile),n(13,S=i.getFiles),n(14,R=i.moveFile),n(15,M=i.prepareFile),n(16,U=i.prepareFiles),n(17,y=i.processFile),n(18,P=i.processFiles),n(19,F=i.removeFile),n(20,b=i.removeFiles),n(21,w=i.sort)))}),ds(()=>{!i||(i.destroy(),i=void 0)});function x(_){pr[_?"unshift":"push"](()=>{a=_,n(7,a)})}return e.$$set=_=>{n(27,t=dn(dn({},t),fn(_))),"class"in _&&n(0,l=_.class),"id"in _&&n(1,o=_.id),"name"in _&&n(2,u=_.name),"allowMultiple"in _&&n(3,c=_.allowMultiple),"required"in _&&n(4,f=_.required),"captureMethod"in _&&n(5,m=_.captureMethod),"acceptedFileTypes"in _&&n(6,E=_.acceptedFileTypes),"addFile"in _&&n(8,T=_.addFile),"addFiles"in _&&n(9,D=_.addFiles),"browse"in _&&n(10,g=_.browse),"fireSync"in _&&n(11,O=_.fireSync),"getFile"in _&&n(12,v=_.getFile),"getFiles"in _&&n(13,S=_.getFiles),"moveFile"in _&&n(14,R=_.moveFile),"prepareFile"in _&&n(15,M=_.prepareFile),"prepareFiles"in _&&n(16,U=_.prepareFiles),"processFile"in _&&n(17,y=_.processFile),"processFiles"in _&&n(18,P=_.processFiles),"removeFile"in _&&n(19,F=_.removeFile),"removeFiles"in _&&n(20,b=_.removeFiles),"sort"in _&&n(21,w=_.sort)},t=fn(t),[l,o,u,c,f,m,E,a,T,D,g,O,v,S,R,M,U,y,P,F,b,w,r,s,x]}class bl extends fr{constructor(t){super(),Er(this,t,Ml,Pl,mr,{registerPlugin:22,isSupported:23,class:0,id:1,name:2,allowMultiple:3,required:4,captureMethod:5,acceptedFileTypes:6,addFile:8,addFiles:9,browse:10,fireSync:11,getFile:12,getFiles:13,moveFile:14,prepareFile:15,prepareFiles:16,processFile:17,processFiles:18,removeFile:19,removeFiles:20,sort:21})}get registerPlugin(){return this.$$.ctx[22]}get isSupported(){return this.$$.ctx[23]}get class(){return this.$$.ctx[0]}set class(t){this.$$set({class:t}),j()}get id(){return this.$$.ctx[1]}set id(t){this.$$set({id:t}),j()}get name(){return this.$$.ctx[2]}set name(t){this.$$set({name:t}),j()}get allowMultiple(){return this.$$.ctx[3]}set allowMultiple(t){this.$$set({allowMultiple:t}),j()}get required(){return this.$$.ctx[4]}set required(t){this.$$set({required:t}),j()}get captureMethod(){return this.$$.ctx[5]}set captureMethod(t){this.$$set({captureMethod:t}),j()}get acceptedFileTypes(){return this.$$.ctx[6]}set acceptedFileTypes(t){this.$$set({acceptedFileTypes:t}),j()}get addFile(){return this.$$.ctx[8]}set addFile(t){this.$$set({addFile:t}),j()}get addFiles(){return this.$$.ctx[9]}set addFiles(t){this.$$set({addFiles:t}),j()}get browse(){return this.$$.ctx[10]}set browse(t){this.$$set({browse:t}),j()}get fireSync(){return this.$$.ctx[11]}set fireSync(t){this.$$set({fireSync:t}),j()}get getFile(){return this.$$.ctx[12]}set getFile(t){this.$$set({getFile:t}),j()}get getFiles(){return this.$$.ctx[13]}set getFiles(t){this.$$set({getFiles:t}),j()}get moveFile(){return this.$$.ctx[14]}set moveFile(t){this.$$set({moveFile:t}),j()}get prepareFile(){return this.$$.ctx[15]}set prepareFile(t){this.$$set({prepareFile:t}),j()}get prepareFiles(){return this.$$.ctx[16]}set prepareFiles(t){this.$$set({prepareFiles:t}),j()}get processFile(){return this.$$.ctx[17]}set processFile(t){this.$$set({processFile:t}),j()}get processFiles(){return this.$$.ctx[18]}set processFiles(t){this.$$set({processFiles:t}),j()}get removeFile(){return this.$$.ctx[19]}set removeFile(t){this.$$set({removeFile:t}),j()}get removeFiles(){return this.$$.ctx[20]}set removeFiles(t){this.$$set({removeFiles:t}),j()}get sort(){return this.$$.ctx[21]}set sort(t){this.$$set({sort:t}),j()}}/*!
 * FilePondPluginFileValidateType 1.2.8
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const ns=({addFilter:e,utils:t})=>{const{Type:n,isString:r,replaceInString:s,guesstimateMimeType:a,getExtensionFromFilename:i,getFilenameFromURL:l}=t,o=(E,d)=>{const T=(/^[^/]+/.exec(E)||[]).pop(),D=d.slice(0,-2);return T===D},u=(E,d)=>E.some(T=>/\*$/.test(T)?o(d,T):T===d),c=E=>{let d="";if(r(E)){const T=l(E),D=i(T);D&&(d=a(D))}else d=E.type;return d},f=(E,d,T)=>{if(d.length===0)return!0;const D=c(E);return T?new Promise((g,O)=>{T(E,D).then(v=>{u(d,v)?g():O()}).catch(O)}):u(d,D)},m=E=>d=>E[d]===null?!1:E[d]||d;return e("SET_ATTRIBUTE_TO_OPTION_MAP",E=>Object.assign(E,{accept:"acceptedFileTypes"})),e("ALLOW_HOPPER_ITEM",(E,{query:d})=>d("GET_ALLOW_FILE_TYPE_VALIDATION")?f(E,d("GET_ACCEPTED_FILE_TYPES")):!0),e("LOAD_FILE",(E,{query:d})=>new Promise((T,D)=>{if(!d("GET_ALLOW_FILE_TYPE_VALIDATION")){T(E);return}const g=d("GET_ACCEPTED_FILE_TYPES"),O=d("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),v=f(E,g,O),S=()=>{const R=g.map(m(d("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"))).filter(U=>U!==!1),M=R.filter(function(U,y){return R.indexOf(U)===y});D({status:{main:d("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:s(d("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:M.join(", "),allButLastType:M.slice(0,-1).join(", "),lastType:M[R.length-1]})}})};if(typeof v=="boolean")return v?T(E):S();v.then(()=>{T(E)}).catch(S)})),{options:{allowFileTypeValidation:[!0,n.BOOLEAN],acceptedFileTypes:[[],n.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",n.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",n.STRING],fileValidateTypeLabelExpectedTypesMap:[{},n.OBJECT],fileValidateTypeDetectType:[null,n.FUNCTION]}}},Ll=typeof window!="undefined"&&typeof window.document!="undefined";Ll&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:ns}));function Cl(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function _e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function se(e){_e(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console!="undefined"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(new Error().stack)),new Date(NaN))}function sr(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function mt(e,t){_e(2,arguments);var n=se(e),r=se(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}var rs=6e4,ss=36e5;function Nl(e,t){_e(2,arguments);var n=se(e),r=se(t),s=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return s*12+a}function wl(e,t){return _e(2,arguments),se(e).getTime()-se(t).getTime()}var ir={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},Fl="trunc";function Gl(e){return e?ir[e]:ir[Fl]}function Ul(e){_e(1,arguments);var t=se(e);return t.setHours(23,59,59,999),t}function Bl(e){_e(1,arguments);var t=se(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function Vl(e){_e(1,arguments);var t=se(e);return Ul(t).getTime()===Bl(t).getTime()}function xl(e,t){_e(2,arguments);var n=se(e),r=se(t),s=mt(n,r),a=Math.abs(Nl(n,r)),i;if(a<1)i=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*a);var l=mt(n,r)===-s;Vl(se(e))&&a===1&&mt(e,r)===1&&(l=!1),i=s*(a-Number(l))}return i===0?0:i}function ql(e,t,n){_e(2,arguments);var r=wl(e,t)/1e3;return Gl(n==null?void 0:n.roundingMethod)(r)}var Yl={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Hl=function(e,t,n){var r,s=Yl[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},Wl=Hl;function wt(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var zl={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},kl={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Xl={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jl={date:wt({formats:zl,defaultWidth:"full"}),time:wt({formats:kl,defaultWidth:"full"}),dateTime:wt({formats:Xl,defaultWidth:"full"})},Ql=jl,$l={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Kl=function(e,t,n,r){return $l[e]},Zl=Kl;function Ke(e){return function(t,n){var r=n||{},s=r.context?String(r.context):"standalone",a;if(s==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,l=r.width?String(r.width):i;a=e.formattingValues[l]||e.formattingValues[i]}else{var o=e.defaultWidth,u=r.width?String(r.width):e.defaultWidth;a=e.values[u]||e.values[o]}var c=e.argumentCallback?e.argumentCallback(t):t;return a[c]}}var Jl={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ec={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},tc={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},nc={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},rc={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},sc={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ic=function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},ac={ordinalNumber:ic,era:Ke({values:Jl,defaultWidth:"wide"}),quarter:Ke({values:ec,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Ke({values:tc,defaultWidth:"wide"}),day:Ke({values:nc,defaultWidth:"wide"}),dayPeriod:Ke({values:rc,defaultWidth:"wide",formattingValues:sc,defaultFormattingWidth:"wide"})},oc=ac;function Ze(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;var i=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],o=Array.isArray(l)?cc(l,function(f){return f.test(i)}):lc(l,function(f){return f.test(i)}),u;u=e.valueCallback?e.valueCallback(o):o,u=n.valueCallback?n.valueCallback(u):u;var c=t.slice(i.length);return{value:u,rest:c}}}function lc(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function cc(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function uc(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var s=r[0],a=t.match(e.parsePattern);if(!a)return null;var i=e.valueCallback?e.valueCallback(a[0]):a[0];i=n.valueCallback?n.valueCallback(i):i;var l=t.slice(s.length);return{value:i,rest:l}}}var dc=/^(\d+)(th|st|nd|rd)?/i,fc=/\d+/i,Ec={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},mc={any:[/^b/i,/^(a|c)/i]},pc={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Tc={any:[/1/i,/2/i,/3/i,/4/i]},_c={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ic={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gc={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},hc={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Rc={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Dc={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Oc={ordinalNumber:uc({matchPattern:dc,parsePattern:fc,valueCallback:function(e){return parseInt(e,10)}}),era:Ze({matchPatterns:Ec,defaultMatchWidth:"wide",parsePatterns:mc,defaultParseWidth:"any"}),quarter:Ze({matchPatterns:pc,defaultMatchWidth:"wide",parsePatterns:Tc,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Ze({matchPatterns:_c,defaultMatchWidth:"wide",parsePatterns:Ic,defaultParseWidth:"any"}),day:Ze({matchPatterns:gc,defaultMatchWidth:"wide",parsePatterns:hc,defaultParseWidth:"any"}),dayPeriod:Ze({matchPatterns:Rc,defaultMatchWidth:"any",parsePatterns:Dc,defaultParseWidth:"any"})},Sc=Oc,yc={code:"en-US",formatDistance:Wl,formatLong:Ql,formatRelative:Zl,localize:oc,match:Sc,options:{weekStartsOn:0,firstWeekContainsDate:1}},vc=yc;function Pe(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}function Ac(e,t){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");t=t||{};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function Pc(e){return Ac({},e)}var ar=1440,Mc=2520,Ft=43200,bc=86400;function or(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};_e(2,arguments);var r=n.locale||vc;if(!r.formatDistance)throw new RangeError("locale must contain formatDistance property");var s=mt(e,t);if(isNaN(s))throw new RangeError("Invalid time value");var a=Pc(n);a.addSuffix=Boolean(n.addSuffix),a.comparison=s;var i,l;s>0?(i=se(t),l=se(e)):(i=se(e),l=se(t));var o=ql(l,i),u=(sr(l)-sr(i))/1e3,c=Math.round((o-u)/60),f;if(c<2)return n.includeSeconds?o<5?r.formatDistance("lessThanXSeconds",5,a):o<10?r.formatDistance("lessThanXSeconds",10,a):o<20?r.formatDistance("lessThanXSeconds",20,a):o<40?r.formatDistance("halfAMinute",null,a):o<60?r.formatDistance("lessThanXMinutes",1,a):r.formatDistance("xMinutes",1,a):c===0?r.formatDistance("lessThanXMinutes",1,a):r.formatDistance("xMinutes",c,a);if(c<45)return r.formatDistance("xMinutes",c,a);if(c<90)return r.formatDistance("aboutXHours",1,a);if(c<ar){var m=Math.round(c/60);return r.formatDistance("aboutXHours",m,a)}else{if(c<Mc)return r.formatDistance("xDays",1,a);if(c<Ft){var E=Math.round(c/ar);return r.formatDistance("xDays",E,a)}else if(c<bc)return f=Math.round(c/Ft),r.formatDistance("aboutXMonths",f,a)}if(f=xl(l,i),f<12){var d=Math.round(c/Ft);return r.formatDistance("xMonths",d,a)}else{var T=f%12,D=Math.floor(f/12);return T<3?r.formatDistance("aboutXYears",D,a):T<9?r.formatDistance("overXYears",D,a):r.formatDistance("almostXYears",D+1,a)}}function lr(e,t){_e(1,arguments);var n=se(e);if(isNaN(n.getTime()))throw new RangeError("Invalid time value");var r=t!=null&&t.format?String(t.format):"extended",s=t!=null&&t.representation?String(t.representation):"complete";if(r!=="extended"&&r!=="basic")throw new RangeError("format must be 'extended' or 'basic'");if(s!=="date"&&s!=="time"&&s!=="complete")throw new RangeError("representation must be 'date', 'time', or 'complete'");var a="",i="",l=r==="extended"?"-":"",o=r==="extended"?":":"";if(s!=="time"){var u=Pe(n.getDate(),2),c=Pe(n.getMonth()+1,2),f=Pe(n.getFullYear(),4);a="".concat(f).concat(l).concat(c).concat(l).concat(u)}if(s!=="date"){var m=n.getTimezoneOffset();if(m!==0){var E=Math.abs(m),d=Pe(Math.floor(E/60),2),T=Pe(E%60,2),D=m<0?"+":"-";i="".concat(D).concat(d,":").concat(T)}else i="Z";var g=Pe(n.getHours(),2),O=Pe(n.getMinutes(),2),v=Pe(n.getSeconds(),2),S=a===""?"":"T",R=[g,O,v].join(o);a="".concat(a).concat(S).concat(R).concat(i)}return a}function Lc(e,t){_e(1,arguments);var n=t||{},r=n.additionalDigits==null?2:Cl(n.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var s=Fc(e),a;if(s.date){var i=Gc(s.date,r);a=Uc(i.restDateString,i.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);var l=a.getTime(),o=0,u;if(s.time&&(o=Bc(s.time),isNaN(o)))return new Date(NaN);if(s.timezone){if(u=Vc(s.timezone),isNaN(u))return new Date(NaN)}else{var c=new Date(l+o),f=new Date(0);return f.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),f.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),f}return new Date(l+o+u)}var ut={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Cc=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Nc=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,wc=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Fc(e){var t={},n=e.split(ut.dateTimeDelimiter),r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],ut.timeZoneDelimiter.test(t.date)&&(t.date=e.split(ut.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){var s=ut.timezone.exec(r);s?(t.time=r.replace(s[1],""),t.timezone=s[1]):t.time=r}return t}function Gc(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var s=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?s:a*100,restDateString:e.slice((r[1]||r[2]).length)}}function Uc(e,t){if(t===null)return new Date(NaN);var n=e.match(Cc);if(!n)return new Date(NaN);var r=!!n[4],s=Je(n[1]),a=Je(n[2])-1,i=Je(n[3]),l=Je(n[4]),o=Je(n[5])-1;if(r)return Wc(t,l,o)?xc(t,l,o):new Date(NaN);var u=new Date(0);return!Yc(t,a,i)||!Hc(t,s)?new Date(NaN):(u.setUTCFullYear(t,a,Math.max(s,i)),u)}function Je(e){return e?parseInt(e):1}function Bc(e){var t=e.match(Nc);if(!t)return NaN;var n=Gt(t[1]),r=Gt(t[2]),s=Gt(t[3]);return zc(n,r,s)?n*ss+r*rs+s*1e3:NaN}function Gt(e){return e&&parseFloat(e.replace(",","."))||0}function Vc(e){if(e==="Z")return 0;var t=e.match(wc);if(!t)return 0;var n=t[1]==="+"?-1:1,r=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return kc(r,s)?n*(r*ss+s*rs):NaN}function xc(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var s=r.getUTCDay()||7,a=(t-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+a),r}var qc=[31,null,31,30,31,30,31,31,30,31,30,31];function is(e){return e%400===0||e%4===0&&e%100!==0}function Yc(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(qc[t]||(is(e)?29:28))}function Hc(e,t){return t>=1&&t<=(is(e)?366:365)}function Wc(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function zc(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function kc(e,t){return t>=0&&t<=59}function cr(e,t,n){const r=e.slice();return r[8]=t[n],r}function ur(e){let t,n;return{c(){t=ee("p"),n=me("Looks like you haven\u2019t uploaded any files yet."),this.h()},l(r){t=te(r,"P",{class:!0});var s=re(t);n=pe(s,"Looks like you haven\u2019t uploaded any files yet."),s.forEach(W),this.h()},h(){q(t,"class","my-2 text-sm text-gray-600")},m(r,s){Se(r,t,s),Y(t,n)},d(r){r&&W(t)}}}function dr(e){let t,n,r,s,a,i,l=e[8].nation+"",o,u,c,f,m,E,d=or(e[8].date,new Date,{addSuffix:!0})+"",T,D,g,O,v;return{c(){t=ee("div"),n=ee("a"),r=me("Admit"),a=ge(),i=ee("span"),o=me(l),c=ge(),f=ee("span"),m=me("applied "),E=ee("time"),T=me(d),v=ge(),this.h()},l(S){t=te(S,"DIV",{class:!0});var R=re(t);n=te(R,"A",{href:!0,class:!0,target:!0,rel:!0});var M=re(n);r=pe(M,"Admit"),M.forEach(W),a=he(R),i=te(R,"SPAN",{class:!0});var U=re(i);o=pe(U,l),U.forEach(W),c=he(R),f=te(R,"SPAN",{class:!0});var y=re(f);m=pe(y,"applied "),E=te(y,"TIME",{datetime:!0,title:!0});var P=re(E);T=pe(P,d),P.forEach(W),y.forEach(W),v=he(R),R.forEach(W),this.h()},h(){q(n,"href",s=e[8].link),q(n,"class","inline-block px-2.5 py-1.5 text-sm font-medium leading-5 text-gray-800 transition active:transition-none duration-150 ease-in-out bg-white rounded shadow-sm hover:text-gray-600 focus:outline-none focus:ring-2 ring-blue-200 ring-offset-2 ring-offset-gray-100 active:bg-gray-200 active:text-gray-800 mr-2"),q(n,"target","_blank"),q(n,"rel","noreferrer noopener"),q(i,"class",u="font-medium align-middle "+(dt(e[8].date)?"text-gray-500":"text-gray-800")),q(E,"datetime",D=lr(e[8].date)),q(E,"title",g=e[8].date.toLocaleDateString("en")),q(f,"class",O="text-sm leading-4 align-middle "+(dt(e[8].date)?"text-red-400":"text-gray-500")),q(t,"class","p-1 bg-gray-100 rounded-md")},m(S,R){Se(S,t,R),Y(t,n),Y(n,r),Y(t,a),Y(t,i),Y(i,o),Y(t,c),Y(t,f),Y(f,m),Y(f,E),Y(E,T),Y(t,v)},p(S,R){R&2&&s!==(s=S[8].link)&&q(n,"href",s),R&2&&l!==(l=S[8].nation+"")&&En(o,l),R&2&&u!==(u="font-medium align-middle "+(dt(S[8].date)?"text-gray-500":"text-gray-800"))&&q(i,"class",u),R&2&&d!==(d=or(S[8].date,new Date,{addSuffix:!0})+"")&&En(T,d),R&2&&D!==(D=lr(S[8].date))&&q(E,"datetime",D),R&2&&g!==(g=S[8].date.toLocaleDateString("en"))&&q(E,"title",g),R&2&&O!==(O="text-sm leading-4 align-middle "+(dt(S[8].date)?"text-red-400":"text-gray-500"))&&q(f,"class",O)},d(S){S&&W(t)}}}function Xc(e){let t,n,r,s,a,i,l,o,u,c,f,m,E,d,T,D,g,O,v,S,R,M,U,y,P,F,b,w={name:"filepond",allowMultiple:!0,onaddfile:e[2],onremovefile:e[3],acceptedFileTypes:["message/rfc822"],fileValidateTypeLabelExpectedTypes:"Expects .eml file (message/rfc822)"};v=new bl({props:w}),e[4](v);let x=e[1].length===0&&ur(),_=e[1],N=[];for(let p=0;p<_.length;p+=1)N[p]=dr(cr(e,_,p));return{c(){t=ge(),n=ee("h1"),r=me("WA Application Loader"),s=ge(),a=ee("h2"),i=me("Quickly extract WA admit links from emails."),l=ge(),o=ee("div"),u=ee("section"),c=ee("h3"),f=me("Upload Emails"),m=ge(),E=ee("p"),d=me("Upload "),T=ee("code"),D=me(".eml"),g=me(` files. Multiple files and folders are
			supported.`),O=ge(),fs(v.$$.fragment),S=ge(),R=ee("section"),M=ee("h3"),U=me("Admit Links"),y=ge(),P=ee("div"),x&&x.c(),F=ge();for(let p=0;p<N.length;p+=1)N[p].c();this.h()},l(p){Es('[data-svelte="svelte-1e86wm1"]',document.head).forEach(W),t=he(p),n=te(p,"H1",{class:!0});var L=re(n);r=pe(L,"WA Application Loader"),L.forEach(W),s=he(p),a=te(p,"H2",{class:!0});var A=re(a);i=pe(A,"Quickly extract WA admit links from emails."),A.forEach(W),l=he(p),o=te(p,"DIV",{class:!0});var B=re(o);u=te(B,"SECTION",{});var H=re(u);c=te(H,"H3",{class:!0});var Be=re(c);f=pe(Be,"Upload Emails"),Be.forEach(W),m=he(H),E=te(H,"P",{class:!0});var Ve=re(E);d=pe(Ve,"Upload "),T=te(Ve,"CODE",{class:!0});var Ie=re(T);D=pe(Ie,".eml"),Ie.forEach(W),g=pe(Ve,` files. Multiple files and folders are
			supported.`),Ve.forEach(W),O=he(H),ms(v.$$.fragment,H),H.forEach(W),S=he(B),R=te(B,"SECTION",{});var xe=re(R);M=te(xe,"H3",{class:!0});var V=re(M);U=pe(V,"Admit Links"),V.forEach(W),y=he(xe),P=te(xe,"DIV",{class:!0});var k=re(P);x&&x.l(k),F=he(k);for(let ue=0;ue<N.length;ue+=1)N[ue].l(k);k.forEach(W),xe.forEach(W),B.forEach(W),this.h()},h(){document.title="WA Loader",q(n,"class","mb-4 text-5xl font-extrabold text-gray-900"),q(a,"class","mb-4 text-xl text-gray-700"),q(c,"class","mb-2 text-2xl font-bold text-gray-900"),q(T,"class","bg-gray-200 rounded p-0.5"),q(E,"class","my-2 text-sm text-gray-600"),q(M,"class","mb-2 text-2xl font-bold text-gray-900"),q(P,"class","space-y-1"),q(o,"class","grid grid-cols-2 gap-4")},m(p,h){Se(p,t,h),Se(p,n,h),Y(n,r),Se(p,s,h),Se(p,a,h),Y(a,i),Se(p,l,h),Se(p,o,h),Y(o,u),Y(u,c),Y(c,f),Y(u,m),Y(u,E),Y(E,d),Y(E,T),Y(T,D),Y(E,g),Y(u,O),ps(v,u,null),Y(o,S),Y(o,R),Y(R,M),Y(M,U),Y(R,y),Y(R,P),x&&x.m(P,null),Y(P,F);for(let L=0;L<N.length;L+=1)N[L].m(P,null);b=!0},p(p,[h]){const L={};if(v.$set(L),p[1].length===0?x||(x=ur(),x.c(),x.m(P,F)):x&&(x.d(1),x=null),h&2){_=p[1];let A;for(A=0;A<_.length;A+=1){const B=cr(p,_,A);N[A]?N[A].p(B,h):(N[A]=dr(B),N[A].c(),N[A].m(P,null))}for(;A<N.length;A+=1)N[A].d(1);N.length=_.length}},i(p){b||(Ts(v.$$.fragment,p),b=!0)},o(p){_s(v.$$.fragment,p),b=!1},d(p){p&&W(t),p&&W(n),p&&W(s),p&&W(a),p&&W(l),p&&W(o),e[4](null),Is(v),x&&x.d(),gs(N,p)}}}function dt(e){return new Date-e>28*(24*60*60*1e3)}function jc(e,t,n){let r;hs(async()=>{r=(await cs(()=>import("../chunks/postal-mime-44816a46.js").then(function(m){return m.p}),[])).default}),gt(ns);let s,a=[],i=[];async function l(f,m){const E=await new r().parse(m.file),d=E.to[0].name,T=Lc(E.date),D=E.text.match(/^https:\/\/www\.nationstates\.net\/page=join_WA\?nation=.*&appid=.*$/gm)[0],g=m.id;a.push({nation:d,date:T,link:D,id:g}),u()}async function o(f,m){a=a.filter(E=>E.id!==m.id),u()}function u(){n(1,i=[]);for(const f of a){const m=i.map(E=>E.nation);m.includes(f.nation)?i[m.indexOf(f.nation)].date<f.date&&n(1,i[m.indexOf(f.nation)]=f,i):i.push(f)}i.sort((f,m)=>f.nation.localeCompare(m.nation,"en",{sensitivity:"base",numeric:!0})),n(1,i)}function c(f){pr[f?"unshift":"push"](()=>{s=f,n(0,s)})}return[s,i,l,o,c]}class Zc extends fr{constructor(t){super(),Er(this,t,jc,Xc,mr,{})}}export{Zc as default};
